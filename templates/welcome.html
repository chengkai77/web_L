<!DOCTYPE html>
<html translate="no">
<head>
  <meta charset="utf-8">
  <!--<meta name="viewport" content="width=device-width,initial-scale=1.0">-->
  <title>Python Platform</title>
  <link href="../static/javascript/jvisio-flow/lib/fonts/font-awesome.min.css" rel="stylesheet">
  <link href="../static/javascript/jvisio-flow/lib/fonts/simple-line-icons.css" rel="stylesheet">
  <link href="../static/javascript/jvisio-flow/lib/bootstrap/bootstrap.min.css" rel="stylesheet">
  <link href="../static/javascript/jvisio-flow/lib/jqueryui/jquery-ui.css" rel="stylesheet">
  <link href="../static/javascript/jvisio-flow/jvisio.css" rel="stylesheet">
  <link href="../static/javascript/layer/default/layer.css" rel="stylesheet">
  <link href="../static/javascript/layer/default/layui.css" rel="stylesheet">
  <link href="../static/javascript/layer/default/layui2.css" rel="stylesheet">
  <link href="../static/style/dropdown/normalize.min.css" rel="stylesheet">
  <link href="../static/style/dropdown/style.css" rel="stylesheet">
  <script>
    var div_json = {};
    var div_selection_list = [];
    function layerMsg(message){
        layer.msg(message, {
            time: 2000,
        });
    }
    function getYourIP(){
        var RTCPeerConnection = window.RTCPeerConnection || window.webkitRTCPeerConnection || window.mozRTCPeerConnection;
        if (RTCPeerConnection) (function () {
            var rtc = new RTCPeerConnection({iceServers:[]});
            if (1 || window.mozRTCPeerConnection) {
                rtc.createDataChannel('', {reliable:false});
            };
            rtc.onicecandidate = function (evt) {
                if (evt.candidate) grepSDP("a="+evt.candidate.candidate);
            };
            rtc.createOffer(function (offerDesc) {
                grepSDP(offerDesc.sdp);
                rtc.setLocalDescription(offerDesc);
            }, function (e) { console.warn("offer failed", e); });
            var addrs = Object.create(null);
            addrs["0.0.0.0"] = false;
            function updateDisplay(newAddr) {
                if (newAddr in addrs) return;
                else addrs[newAddr] = true;
                var displayAddrs = Object.keys(addrs).filter(function (k) { return addrs[k]; });
                for(var i = 0; i < displayAddrs.length; i++){
                    if(displayAddrs[i].length > 16){
                        displayAddrs.splice(i, 1);
                        i--;
                    }
                }
                var ip = displayAddrs[0];
                $("#ip").val(ip);
            }
            function grepSDP(sdp) {
                var hosts = [];
                sdp.split('\r\n').forEach(function (line, index, arr) {
                    if (~line.indexOf("a=candidate")) {
                        var parts = line.split(' '),
                            addr = parts[4],
                            type = parts[7];
                        if (type === 'host') updateDisplay(addr);
                    } else if (~line.indexOf("c=")) {
                        var parts = line.split(' '),
                            addr = parts[2];
                        updateDisplay(addr);
                    }
                });
            }
        })();
    };
    function openFile(type){
        $("#type").val(type);
        layer.open({
          type: 2,
          title: 'Files List',
          skin: 'layui-layer-lan', //加上边框
          area: ['330px', '350px'], //宽高
          maxmin: true,
          content: '../openfile/?type='+type,
          btn: ['Yes','No','Delete'],
          btn1:function(index, layero){
            var className = document.getElementsByClassName("layui-layer-btn0")[0].className;
            if (className.indexOf("disable") != -1){
                return false;
            }
            var iframeWin = window[layero.find('iframe')[0]['name']];
        	var selectfile = iframeWin.getRow();
        	if (selectfile.indexOf(".py") == -1){
        	    return false;
        	}
        	var showed_paths = selectfile.split("\\");
        	var showed_path = "";
        	if (selectfile.indexOf("D:\\workspace\\Python_Platform\\Draw_Process\\pyfile\\public") != -1){
        	    showed_path = selectfile.replace("D:\\workspace\\Python_Platform\\Draw_Process\\pyfile\\public","Public");
        	}else if(selectfile.indexOf("D:\\workspace\\Python_Platform\\Draw_Process\\pyfile\\release") != -1){
        	    showed_path = selectfile.replace("D:\\workspace\\Python_Platform\\Draw_Process\\pyfile\\release","Release");
        	}else{
        	    showed_path = "Private"
        	    for (var i=6;i<showed_paths.length;i++){
        	      showed_path = showed_path + "\\" + showed_paths[i];
        	    }
        	}
        	showed_path = showed_path.replace(".py","");
        	var html = '<marquee class="logo-default" scrolldelay="200" style="white-space: nowrap;text-overflow: ellipsis;color:white;font-size:18px;font-weight:bold;" title="'+showed_path+'">'+showed_path+'</marquee>';
        	parent.$("#open_file_path").html(html);
<!--        	parent.$("#open_file_path").text(showed_path);-->
        	$("#selectfile").val(selectfile);
            $.ajax({
              type:'POST',
              url:'../drawprocess/',
              dataType:'json',
              data:{"type":type,"selectfile":selectfile},
              beforeSend:function(){
                layer.close(index);
                layer.load(2);
              },
              success:function(data){
                layer.closeAll('loading');
                result = data['result'];
                if (result == "success"){
                    extend = data['extend'];
                    list = data['list'];
                    $("#move").val("yes");
                    var divs = $('#diagramContainer-main').find("div")
                    var svgs = $('#diagramContainer-main').find("svg")
                    for (var i=0;i<divs.length;i++){
                      var div = divs[i];
                      div.remove();
                    }
                    for (var j=0;j<svgs.length;j++){
                      var svg = svgs[j];
                      svg.remove();
                    }
                    for (var x=0;x<list.length;x++){
                      var dataObj = {};
                      dataObj.id = list[x].source_id;
                      dataObj.jnode = list[x].jnode;
                      dataObj.jnodeClass = list[x].jnode_class;
                      dataObj.jnodeHtml = list[x].jnode_html;
                      dataObj.left = parseFloat(list[x].left);
                      dataObj.top = parseFloat(list[x].top);
                      $("#left").val(dataObj.left);
                      $("#top").val(dataObj.top);
                      var targetHtml = Mustache.render($("#jnode-template").html(), dataObj);
                      $("#diagramContainer-main").append(targetHtml);
                      jsPlumb.draggable(list[x].source_id, {containment: 'parent'});
                      visioConfig.baseArchors.forEach(function (key) {
                          jsPlumb.addEndpoint(
                              list[x].source_id,
                              {
                                  anchors: key,
                                  connectorOverlays: [
                                      ["Arrow", {width: 10, length: 10, location: 1, id: "arrow",visible: "false"}],
                                      ["Label", {id: "myLabel", cssClass: "connectorLabel",visible: "false", events:{
                                          "click":function (label, evt) {
                                              console.log("clicked on label for connection",label.component);
                                          }
                                      }}]
                                  ]
                              },
                              visioConfig.hollowCircle);
                      });
                      $("#"+list[x].source_id).on("mouseenter", ".jnode-box", function () {
                                    var left = 10,top = 18,right = 10,top=33;
                                    var backgroundColor = $(this).css("background-color");
                                    if (backgroundColor == "rgb(146, 208, 80)"){
                                        var divWidth = $(this).width()/2 - 3;
                                        $(this).append('<i class="fa fa-trash-o" style="position:absolute;color:#fff;left:'+left+'px;top:'+top+'px;z-index:12;"/>');
                                        $(this).append('<i class="fa fa-cog" style="position:absolute;color:#fff;right:'+right+'px;top:'+top+'px;z-index:12;"/>');
                                        $(this).append('<i class="icon-refresh" style="position:absolute;color:#fff;left:'+divWidth+'px;top:'+4+'px;z-index:12;"/>');
                                    }else{
                                        $(this).append('<i class="fa fa-trash-o" style="position:absolute;color:#fff;left:'+left+'px;top:'+top+'px;z-index:12;"/>');
                                        $(this).append('<i class="fa fa-cog" style="position:absolute;color:#fff;right:'+right+'px;top:'+top+'px;z-index:12;"/>');
                                    }
                                }).on("mouseleave", ".jnode-box", function () {
                                    $(".fa-trash-o").remove();
                                    $(".fa-cog").remove();
                                    try{
                                       $(".icon-refresh").remove();
                                    }catch(err){
                                        return
                                    }
                                }).on("mousedown", ".jnode-box", function () {
                                    var div = $(this);
                                    var text = div[0].children[0].innerText;
                                    var new_text = text.replace(/ /g,"-");
                                    $(this)[0].children[0].innerText = new_text;
                                }).on("mouseup", ".jnode-box", function () {
                                    var div = $(this);
                                    var text = div[0].children[0].innerText;
                                    var new_text = text.replace(/-/g," ");
                                    $(this)[0].children[0].innerText = new_text;
                                }).on("click", ".fa-trash-o", function () {
                                    var text = $(this).parent()[0].innerText;
                                    var thisDiv = $(this).parent();
                                    var parentDiv = $(this).parent()[0].parentElement;
                                    var id = $(this).parent()[0].parentElement.id;
                                    var json = getConnections();
                                    var nodeNo = json[id+"nodeNo"];
                                    layer.confirm('Are you sure to delete?', {
                                        title: "Delete Confirmation",
                                        btn: ['Yes','No']
                                        }, function(index){
                                            jsPlumb.removeAllEndpoints(id);
                                            thisDiv.remove();
                                            parentDiv.remove();
                                            layer.close(index);
                                            var param = {"name":text,"nodeNo":nodeNo,"divId":id}
                                            $.ajax({
                                              type:'POST',
                                              url:'../deletevariant/',
                                              dataType:'json',
                                              data:param,
                                              success:function(data){
                                              }
                                            })
                                        })
                                }).on("click", ".fa-cog", function () {
                                    var text = $(this).parent()[0].innerText;
                                    var parent_div = $(this).parent()[0];
                                    var id = parent_div.parentElement.id;
                                    var process_id = id;
                                    var color = parent_div.style.borderColor;
                                    if (typeof color != "undefined" && color != null && color != ""){
                                        $("#borderColor").val(color);
                                    }else{
                                        $("#borderColor").val("");
                                    }
                                    parent_div.setAttribute("style","background:#d58512;border:3px solid #d58512;");
                                    try{
                                        var div_id = parent_div.children[0].getAttribute("name");
                                    }catch(err){
                                        var div_id = "";
                                    }
                                    if (div_id != null && div_id != "" && typeof(div_id) != "undefined"){
                                        var title = div_id.replace(".py","");
                                        title = title.replace("D:\\workspace\\Python_Platform\\Draw_Process\\pyfile\\","");
                                        titles = title.split("\\");
                                        if (titles[0] == "public"){
                                            title = title.replace("public","Public");
                                        }else if(titles[0] == "release"){
                                            title = title.replace("release","Release");
                                        }else{
                                            title = title.replace(titles[0],"Private");
                                        }
                                        title = title + ' (Click submit to insert the existing process)';
                                        $.ajax({
                                            type:'POST',
                                            url:'../showprocess/',
                                            dataType:'json',
                                            data:{"selectfile":div_id},
                                            beforeSend:function(){
                                                layer.load(2);
                                            },
                                            success:function(data){
                                                layer.closeAll('loading');
                                                result = data['result'];
                                                if (result == "success"){
                                                    list = data['list'];
                                                    var index = layer.open({
                                                        type: 2,
                                                        title: title,
                                                        content: '../processvariant/?selectfile='+div_id,
                                                        area: ['320px', '195px'],
                                                        maxmin: true,
                                                        skin: 'process-class',
                                                        btn: ['Submit','Cancel','Update'],
                                                        btn1:function(index, layero){
                                                            var iframeWin = window[layero.find('iframe')[0]['name']];
                                                            var public_list = new Array;
                                                            var list2 = new Array;
                                                            for (var o=0;o<list.length;o++){
                                                              var variant_string = list[o].variant;
                                                              var public_json = {};
                                                              try{
                                                                public_json = eval('(' + variant_string + ')');
                                                              }catch(err){
                                                                public_json = {};
                                                              }
                                                              var id = list[o].source_id;
                                                              if (iframeWin.document.getElementById(id)){
                                                                var div = iframeWin.document.getElementById(id);
                                                                var input_childs = div.getElementsByTagName("input");
                                                                for (var p=0;p<input_childs.length;p++){
                                                                  var input_child = input_childs[p];
                                                                  var value = input_child.value;
                                                                  var name = input_child.name;
                                                                  if (name != "" && name != null){
                                                                    public_json[name] = value.toString();
                                                                  }
                                                                }
                                                                var select_childs = div.getElementsByTagName("select");
                                                                for (var p=0;p<select_childs.length;p++){
                                                                  var select_child = select_childs[p];
                                                                  var value = select_child.value;
                                                                  var name = select_child.name;
                                                                  public_json[name] = value.toString();
                                                                }
                                                                list[o].variant = JSON.stringify(public_json);
                                                                list2.push(JSON.stringify(list[o]));
                                                              }
                                                              json_2_str = JSON.stringify(list[o]);
                                                              public_list.push(json_2_str);
                                                            }
                                                            var connections = getConnections();
                                                            var param = {};
                                                            param['list'] = JSON.stringify(public_list);
                                                            param['list2'] = JSON.stringify(list2);
                                                            param['id'] = process_id;
                                                            param['nodeNo'] = connections[process_id+'nodeNo'];
                                                            param['group'] = div_id;
                                                            $.ajax({
                                                              type:'POST',
                                                              url:'../saveinsertvariant/',
                                                              dataType:'json',
                                                              data:param,
                                                              beforeSend:function(){
                                                                layer.load(2);
                                                              },
                                                              success:function(data){
                                                                layer.closeAll('loading');
                                                                result = data['result'];
                                                                if (result == "success"){
                                                                    layer.msg('Save Successfully!', {
                                                                      time: 1000,
                                                                      icon:6,
                                                                    });
                                                                    var div = document.getElementById(process_id);
                                                                    div.children[0].setAttribute("style","border:3px solid #d58512");
                                                                }else{
                                                                    layer.msg('Save Failed!', {
                                                                      time: 1000,
                                                                      icon:5,
                                                                    });
                                                                }
                                                              },
                                                            });
                                                        },
                                                        btn2:function(index, layero){
                                                            cancel(id);
                                                        },
                                                        btn3:function(index, layero){
                                                            var iframeWin = window[layero.find('iframe')[0]['name']];
                                                            var public_list = new Array;
                                                            for (var o=0;o<list.length;o++){
                                                              var variant_string = list[o].variant;
                                                              var public_json = {};
                                                              try{
                                                                public_json = eval('(' + variant_string + ')');
                                                              }catch(err){
                                                                public_json = {};
                                                              }
                                                              var id = list[o].source_id;
                                                              if (iframeWin.document.getElementById(id)){
                                                                var div = iframeWin.document.getElementById(id);
                                                                var input_childs = div.getElementsByTagName("input");
                                                                for (var p=0;p<input_childs.length;p++){
                                                                  var input_child = input_childs[p];
                                                                  var value = input_child.value;
                                                                  var name = input_child.name;
                                                                  if (name != "" && name != null){
                                                                    public_json[name] = value.toString();
                                                                  }
                                                                }
                                                                var select_childs = div.getElementsByTagName("select");
                                                                for (var p=0;p<select_childs.length;p++){
                                                                  var select_child = select_childs[p];
                                                                  var value = select_child.value;
                                                                  var name = select_child.name;
                                                                  public_json[name] = value.toString();
                                                                }
                                                                list[o].variant = JSON.stringify(public_json);
                                                              }
                                                              json_2_str = JSON.stringify(list[o]);
                                                              public_list.push(json_2_str);
                                                            }
                                                            var connections = getConnections();
                                                            var param = {};
                                                            param['list'] = JSON.stringify(public_list);
                                                            param['id'] = process_id;
                                                            param['nodeNo'] = connections[process_id+'nodeNo'];
                                                            param['group'] = div_id;
                                                            $.ajax({
                                                              type:'POST',
                                                              url:'../updateinsertvariant/',
                                                              dataType:'json',
                                                              data:param,
                                                              beforeSend:function(){
                                                                layer.load(2);
                                                              },
                                                              success:function(data){
                                                                layer.closeAll('loading');
                                                                result = data['result'];
                                                                if (result == "success"){
                                                                    layer.msg('Save Successfully!', {
                                                                      time: 1000,
                                                                      icon:6,
                                                                    });
                                                                    var div = document.getElementById(process_id);
                                                                    div.children[0].setAttribute("style","border:3px solid #d58512");
                                                                }else{
                                                                    layer.msg('Save Failed!', {
                                                                      time: 1000,
                                                                      icon:5,
                                                                    });
                                                                }
                                                              },
                                                            });
                                                        }
                                                    });
                                                    layer.full(index);
                                                }
                                            }
                                        });
                                    }else{
                                        generateTools(id,text);
                                    }
                                }).on("click", ".icon-refresh", function () {
                                    var text = $(this).parent()[0].innerText;
                                    var thisDiv = $(this).parent();
                                    var id = $(this).parent()[0].parentElement.id;
                                    var divHeight = $("#diagramContainer-main").height();
                                    var process_id = thisDiv[0].children[0].getAttribute("name");
                                    var showed_paths = process_id.split("\\");
                                    var showed_path = "";
                                    if (process_id.indexOf("D:\\workspace\\Python_Platform\\Draw_Process\\pyfile\\public") != -1){
                                        showed_path = process_id.replace("D:\\workspace\\Python_Platform\\Draw_Process\\pyfile\\public","Public");
                                    }else if(selectfile.indexOf("D:\\workspace\\Python_Platform\\Draw_Process\\pyfile\\release") != -1){
                                        process_id = process_id.replace("D:\\workspace\\Python_Platform\\Draw_Process\\pyfile\\release","Release");
                                    }else{
                                        showed_path = "Private"
                                        for (var i=6;i<showed_paths.length;i++){
                                          showed_path = showed_path + "\\" + showed_paths[i];
                                        }
                                    }
                                    showed_path = showed_path.replace(".py","");
                                    var index = layer.open({
                                      type: 2,
                                      title: 'Insert Process (' + showed_path + ')',
                                      skin: 'layui-layer-lan',
                                      area: ['650px', '600px'],
                                      maxmin: true,
                                      content: '../processdetail/?groupID='+id+"&divHeight="+divHeight,
                                      })
                                    layer.full(index);
                                }).on("dblclick", ".jnode-box",function(){
                                    var backgroundColor = $(this).css("background-color");
                                    if (backgroundColor != "rgb(146, 208, 80)"){
                                        var select_json_2_str = JSON.stringify(div_selection_list);
                                        var div = $(this).parent()[0];
                                        var id = $(this).parent()[0].id;
                                        var innerText = div.innerText;
                                        if (innerText !="Start" && innerText != "End"){
                                            if (select_json_2_str.indexOf(id) == -1){
                                                $(div).children(":first").css({"background-color":"#5FB878"});
                                                var color = "";
                                                var className = div.firstElementChild.className;
                                                if (className.indexOf("bdc-success") != -1){
                                                    color = "#4cae4c";
                                                }else if(className.indexOf("bdc-primary") != -1){
                                                    color = "#122b40";
                                                }else if(className.indexOf("bdc-warning") != -1){
                                                    color = "#4F6228";
                                                }else if(className.indexOf("bdc-danger") != -1){
                                                    color = "#ac2925";
                                                }else if(className.indexOf("bdc-wait") != -1){
                                                    color = "#215967";
                                                }else if(className.indexOf("bdc-process") != -1){
                                                    color = "#92D050";
                                                }
                                                var jnode_html = div.firstElementChild.innerHTML;
                                                div_selection_list.push(id);
                                                div_json[id] = color;
                                                div_json[id+"className"] = className;
                                                div_json[id+"jnodeHtml"] = jnode_html;
                                            }
                                        }
                                    }
                                });
                    }
                    $("#move").val("");
                    $("#left").val("");
                    $("#top").val("");
                    for (var y=0;y<list.length;y++){
                      id1 = list[y].source_id;
                      id2 = list[y].target_id;
                      direction1 = list[y].source_type;
                      direction2 = list[y].target_type;
                      if (direction1 != "" && direction1 != null){
                        var name = list[y+1].name || "";
                        var isvisible = false;
                        if (name != "" && name != null){
                          isvisible = true
                        }
                        var c = jsPlumb.connect({
                          anchors: [direction1,direction2,"_jsPlumb_endpoint_anchor"],
                          endpoint: ['Dot', { radius: 2, strokeStyle: '#1e8151',fillStyle: 'transparent',lineWidth: 2}],
                          source: id1,
                          target: id2,
                          hoverPaintStyle: {lineWidth: 2, strokeStyle: "#d58512", outlineWidth: 2, outlineColor: "transparent"},
                          connector: ["Flowchart", {stub: [5, 10], gap: 5, cornerRadius: 5, alwaysRespectStubs: true}],
                          paintStyle:{lineWidth: 2,strokeStyle: '#337ab7',joinstyle: 'round',outlineColor: 'transparent',outlineWidth: 2},
                          overlays: [
                                      ["Arrow",{id:"arrow",length:10,location:1,visible:false,width:10}],
                                      ["Label",{id:"myLabel",name:id2,visible:isvisible,cssClass:"connectorLabel"}]
                                     ],
                        })
                        var label = c.getOverlay("myLabel");
                        var canvas = label.canvas;
                        canvas.setAttribute('name',id2);
                        label.setLabel("");
                        if (name != "" && name != null){
                          var div = $('div[name="'+id2+'"]')[0];
                          div.innerText = name;
                        }
                      }
                    }
                    var transfer = "yes";
                    if (extend == "yes"){
                          for (var l=0;l<list.length;l++){
                          var public_variant = list[l].public_variant;
                          if (public_variant != "" && public_variant != null && public_variant != "{}"){
                            transfer = "no";
                            var public_type = $("#type").val();
                            var public_file = $("#selectfile").val();
                            var index = layer.open({
                              type: 2,
                              title: 'Public Variants',
                              content: '../publicvariant/?type='+public_type+'&selectfile='+public_file,
                              area: ['320px', '195px'],
                              maxmin: true,
                              btn: ['Submit','Cancel'],
                              btn1:function(index, layero){
                                var iframeWin = window[layero.find('iframe')[0]['name']];
                                var public_list = new Array;
                                for (var o=0;o<list.length;o++){
                                  var variant_string = list[o].variant;
                                  var public_json = {};
                                  try{
                                    public_json = eval('(' + variant_string + ')');
                                  }catch(err){
                                    public_json = {};
                                  }
                                  var id = list[o].source_id;
                                  if (iframeWin.document.getElementById(id)){
                                    var div = iframeWin.document.getElementById(id);
                                    var input_childs = div.getElementsByTagName("input");
                                    for (var p=0;p<input_childs.length;p++){
                                      var input_child = input_childs[p];
                                      var value = input_child.value;
                                      var name = input_child.name;
                                      if (name != "" && name != null){
                                        public_json[name] = value.toString();
                                      }
                                    }
                                    var select_childs = div.getElementsByTagName("select");
                                    for (var p=0;p<select_childs.length;p++){
                                      var select_child = select_childs[p];
                                      var value = select_child.value;
                                      var name = select_child.name;
                                      public_json[name] = value.toString();
                                    }
                                    list[o].variant = JSON.stringify(public_json);
                                  }
                                  json_2_str = JSON.stringify(list[o]);
                                  public_list.push(json_2_str);
                                }
                                $.ajax({
                                  type:'POST',
                                  url:'../publictransfer/',
                                  dataType:'json',
                                  data:{"list":public_list,"type":public_type,"selectfile":public_file},
                                  beforeSend:function(){
                                    layer.load(2);
                                  },
                                  success:function(data){
                                    layer.closeAll('loading');
                                    result = data['result'];
                                    if (result == "success"){
                                        var list = data['list'];
                                        for (var i=0;i<list.length;i++){
                                          var div = document.getElementById(list[i]);
                                          div.children[0].setAttribute("style","border:3px solid #d58512");
                                        }
                                        layer.msg('Save public variants successfully!', {
                                          time: 1000,
                                          icon:6,
                                        });
                                    }else{
                                        layer.msg('Save public variants failed!', {
                                          time: 1000,
                                          icon:5,
                                        });
                                    }
                                    layer.close(index);
                                  }
                                })
                              },btn2:function(index, layero){
                                var iframeWin = window[layero.find('iframe')[0]['name']];
                                var public_list = new Array;
                                for (var o=0;o<list.length;o++){
                                  var variant_string = list[o].variant;
                                  var public_json = {};
                                  try{
                                    public_json = eval('(' + variant_string + ')');
                                  }catch(err){
                                    public_json = {};
                                  }
                                  var id = list[o].source_id;
                                  if (iframeWin.document.getElementById(id)){
                                    var div = iframeWin.document.getElementById(id);
                                    var input_childs = div.getElementsByTagName("input");
                                    for (var p=0;p<input_childs.length;p++){
                                      var input_child = input_childs[p];
                                      var value = input_child.value;
                                      var name = input_child.name;
                                      if (name != "" && name != null){
                                        public_json[name] = value.toString();
                                      }
                                    }
                                    var select_childs = div.getElementsByTagName("select");
                                    for (var p=0;p<select_childs.length;p++){
                                      var select_child = select_childs[p];
                                      var value = "";
                                      var name = select_child.name;
                                      public_json[name] = value.toString();
                                    }
                                    list[o].variant = JSON.stringify(public_json);
                                  }
                                  json_2_str = JSON.stringify(list[o]);
                                  public_list.push(json_2_str);
                                }
                                $.ajax({
                                  type:'POST',
                                  url:'../publictransfer/',
                                  dataType:'json',
                                  data:{"list":public_list,"type":public_type,"selectfile":public_file},
                                  beforeSend:function(){
                                    layer.load(2);
                                  },
                                  success:function(data){
                                    layer.closeAll('loading');
                                    result = data['result'];
                                    if (result == "success"){
                                        var list = data['list'];
                                        for (var i=0;i<list.length;i++){
                                          var div = document.getElementById(list[i]);
                                          div.children[0].setAttribute("style","border:3px solid #d58512");
                                        }
                                    }else{
                                        layer.msg('Clear public variants failed!', {
                                          time: 1000,
                                          icon:5,
                                        });
                                    }
                                    layer.close(index);
                                  }
                                })
                              }
                            });
                            layer.full(index);
                            break;
                          }
                        }
                    }
                    if (transfer == "yes"){
                      var transfer_type = $("#type").val();
                      var transfer_file = $("#selectfile").val();
                      param = {"type":transfer_type,"selectfile":transfer_file};
                      $.ajax({
                        type:'POST',
                        url:'../transfervariant/',
                        dataType:'json',
                        data:param,
                        beforeSend:function(){
                          layer.load(2);
                        },
                        success:function(data){
                          layer.closeAll('loading');
                          result = data['result'];
                          if (result == "success"){
                              var list = data['list'];
                              for (var i=0;i<list.length;i++){
                                var div = document.getElementById(list[i]);
                                div.children[0].setAttribute("style","border:3px solid #d58512");
                              }
                              layer.msg('Open file successfully!', {
                                time: 1000,
                                icon:6,
                              });
                          }else{
                              layer.msg('Open failed!', {
                                time: 1000,
                                icon:5,
                              });
                          }
                        }
                      })
                    }
                    $("#type").val("");
                }else{
                    layer.alert('Open failed, file has been damaged!', {
                      title: 'Open Failed',
                      skin: 'layui-layer-lan',
                      closeBtn: 1,
                      icon: 5,
                      offset: 'rb',
                      btn: false,
                    });
                }
              },
            });
          },
          btn3:function(index, layero){
              var className = document.getElementsByClassName("layui-layer-btn2")[0].className;
              if (className.indexOf("disable") != -1){
                  return false;
              }
              var iframeWin = window[layero.find('iframe')[0]['name']];
        	  var selectfile = iframeWin.getDeleteRow();
        	  if (selectfile == "" || selectfile == "null"){
                  return false;
              }
              layer.confirm('Are you sure to delete?', {
                  title: "Delete Confirmation",
                  btn: ['Yes','No']
                  }, function(index){
                      $.ajax({
                          type:'POST',
                          url:'../deleteprocess/',
                          dataType:'json',
                          data:{"selectfile":selectfile},
                          beforeSend:function(){
                              layer.close(index);
                              layer.load(2);
                          },
                          success:function(data){
                              layer.closeAll('loading');
                              var result = data['result'];
                              if (result == "success"){
                                  layer.msg('Delete successfully!', {
                                      time: 1000,
                                      icon:6,
                                  });
                                  iframeWin.clear();
                                  iframeWin.FindData();
                              }else{
                                  var msg = data['msg'];
                                  layer.msg(msg, {
                                      time: 1000,
                                      icon:5,
                                  });
                              }
                          }
                      })
                  }
              )
              return false;
          },
          success: function(layero, index){
              var btns = document.getElementsByClassName("layui-layer-btn0");
              if (type == "public"){
                  {% if 'Draw_Process.views_menu_file_open_public_yes' not in perms %}
                  $(".layui-layer-btn0").addClass("layui-disabled");
                  {% endif %}
                  {% if 'Draw_Process.views_menu_file_open_public_no' not in perms %}
                  $(".layui-layer-btn1").addClass("layui-disabled");
                  {% endif %}
                  {% if 'Draw_Process.views_menu_file_open_public_delete' not in perms %}
                  $(".layui-layer-btn2").addClass("layui-disabled");
                  {% endif %}
              }else if(type == "private"){
                  {% if 'Draw_Process.views_menu_file_open_private_yes' not in perms %}
                  $(".layui-layer-btn0").addClass("layui-disabled");
                  {% endif %}
                  {% if 'Draw_Process.views_menu_file_open_private_no' not in perms %}
                  $(".layui-layer-btn1").addClass("layui-disabled");
                  {% endif %}
                  {% if 'Draw_Process.views_menu_file_open_private_delete' not in perms %}
                  $(".layui-layer-btn2").addClass("layui-disabled");
                  {% endif %}
              }else if(type == "release"){
                  {% if 'Draw_Process.views_menu_file_open_release_yes' not in perms %}
                  $(".layui-layer-btn0").addClass("layui-disabled");
                  {% endif %}
                  {% if 'Draw_Process.views_menu_file_open_release_no' not in perms %}
                  $(".layui-layer-btn1").addClass("layui-disabled");
                  {% endif %}
                  {% if 'Draw_Process.views_menu_file_open_release_delete' not in perms %}
                  $(".layui-layer-btn2").addClass("layui-disabled");
                  {% endif %}
              }
          }
        });
    }
    function save(divId){
        var div = document.getElementById(divId);
        var div_width = div.offsetWidth;
        var text = div.innerText;
        var param = getConnections();
        var variant = {};
        var public_variant = {};
        var properties = document.getElementsByName("property");
        param.divID = divId;
        for (var i=0;i<properties.length;i++){
            property = properties[i];
            id = property.id;
            value = property.value;
            if (id == "nodeNo" || id == "lastNode"  || id == "nextNode"  || id == "name"  || id == "input"  || id == "output"|| id == "function"){
                param[id] = value;
            }else{
                variant[id] = value;
            }
        }
        $("input:checkbox").each(function(){
          if(this.checked == true){
            var checkbox_name = this.name;
            var span_text = this.parentElement.children[1].innerText;
            public_variant[checkbox_name] = span_text;
          }
        })
        param['variant'] = JSON.stringify(variant);
        param['public_variant'] = JSON.stringify(public_variant);
        param['div_width'] = div_width;
        $.ajax({
          type:'POST',
          url:'../savevariant/',
          dataType:'json',
          data:param,
          beforeSend:function(){
            layer.load(2);
          },
          success:function(data){
            layer.closeAll('loading');
            result = data['result'];
            if (result == "success"){
                layer.msg('Save Successfully!', {
                  time: 1000,
                  icon:6,
                });
                div.children[0].setAttribute("style","border:3px solid #d58512");
            }else{
                layer.msg('Save Failed!', {
                  time: 1000,
                  icon:5,
                });
            }
          },
        });
        $("#header").css('border-width','1px');
		$("#header").css('background','#EFF4FE');
		$("#setting-header").css('display','none');
        document.getElementById("bg").style.display ="none";
        $("#property").remove();
        $("#diagramContainer-control").css('display','none');
        $("#diagramContainer-main").css('width','83.33333334%');
    }

    function cancel(divId){
        $("#header").css('border-width','1px');
		$("#header").css('background','#EFF4FE');
		$("#setting-header").css('display','none');
        document.getElementById("bg").style.display ="none";
        $("#property").remove();
        $("#diagramContainer-control").css('display','none');
        $("#diagramContainer-main").css('width','83.33333334%');
        var div = document.getElementById(divId).children[0];
        var className = div.className;
        var color = "";
        if (className.indexOf("bdc-success") != -1){
          color = "#4cae4c";
        }else if(className.indexOf("bdc-primary") != -1){
          color = "#122b40";
        }else if(className.indexOf("bdc-warning") != -1){
          color = "#4F6228";
        }else if(className.indexOf("bdc-danger") != -1){
          color = "#ac2925";
        }else if(className.indexOf("bdc-wait") != -1){
          color = "#215967";
        }else if(className.indexOf("bdc-process") != -1){
          color = "#92D050";
        }
        div.setAttribute("style","background"+color);
        var borderColor = $("#borderColor").val();
        if(typeof borderColor != "undefined" && borderColor != null && borderColor != ""){
          div.setAttribute("style","border:3px solid "+borderColor);
        }
        var param = {};
        param.divID = divId;
        $.ajax({
          type:'POST',
          url:'../getname/',
          dataType:'json',
          data:param,
          beforeSend:function(){
            layer.load(2);
          },
          success:function(data){
            layer.closeAll('loading');
            var name = data.name;
            if (name != "" && name != null){
                var label = document.getElementsByName(divId)[0];
                if (typeof(label) != "undefined"){
                  label.innerText = name;
                  label.style.display = "block";
                }
            }else{
                var label = document.getElementsByName(divId)[0];
                if (typeof(label) != "undefined"){
                  label.innerText = name;
                  label.style.display = "none";
                }
            }
          },
        })
    }

    function getConnections(){
        var json = {};
        var json2 = {};
        var connections = jsPlumb.getAllConnections();
        startID = "";
        nextID = "";
        for(var i in connections){
            try{
              var a = connections[i].sourceId;
              var startdiv = document.getElementById(a);
              var div_width = startdiv.offsetWidth;
              var starttext = "";
              if (document.getElementById(a)){
                starttext = startdiv.innerText;
                starttext = starttext.replace(/\ +/g,"");
                starttext = starttext.replace(/[\r\n]/g,"");
                var div_name = startdiv.children[0].children[0].getAttribute("name");
                if (div_name == null || typeof(div_name) == "undefined"){
                    div_name = "";
                }
                if (starttext == "Start"){
                    startID = a;
                }
              }else{
                continue;
              }
              var b = connections[i].targetId;
              nextID = b;
              var enddiv = document.getElementById(b);
              var endtext = enddiv.innerText;
              var nextNode = starttext + "_" + i + "_" + "nextNode";
              json2[a] = b;
              json2[a+"width"] = div_width;
              json2[a+"div_name"] = div_name;
              json2[a+"text"] = starttext;
              json2[a+"source_type"] = connections[i].endpoints[0].anchor.type;
              json2[a+"target_type"] = connections[i].endpoints[1].anchor.type;
              json2[a+"text"] = starttext;
              json2[b+"text"] = endtext;
            }catch(err){
              try{
                next;
              }catch(err){
                console.log(err);
              }
            }
        }
        var len = connections.length;
        json['length'] = len;
        json['startID'] = startID;
        j = 0;
        var browser_input = [];
        for(var i=0;i<len;i++){
            j = j + 1;
            var nextID = json2[startID];
            if (typeof(nextID) == "undefined"){
                json['length'] = i;
                break;
            }
            var startText = json2[startID+"text"];
            if (startText == "User_Input"){
                browser_input.push(startID);
            }
            var linkText = json2[nextID+"text"];
            if (linkText == "End"){
                json[nextID+"nodeNo"] = parseInt(i+2);
                json[nextID+"text"] = "End";
                json[startID+"source_type"] = json2[startID+"source_type"];
                json[startID+"target_type"] = json2[startID+"target_type"];
                json[startID+"div_name"] = json2[startID+"div_name"];
                json[startID+"text"] = startText;
                json[startID] = nextID;
                json[startID+"nextNode"] = linkText;
                json[nextID+"lastNode"] = startText;
                json[startID+"nodeNo"] = parseInt(i+1);
                startID = nextID;
                break;
            }
            json[startID+"source_type"] = json2[startID+"source_type"];
            json[startID+"target_type"] = json2[startID+"target_type"];
            json[startID+"text"] = startText;
            json[startID+"div_name"] = json2[startID+"div_name"];
            json[startID] = nextID;
            json[startID+"nextNode"] = linkText;
            json[nextID+"lastNode"] = startText;
            json[startID+"nodeNo"] = parseInt(i+1);
            startID = nextID;
        }
        json['length'] = j;
        json['browser_input'] = browser_input;
        return json;
    }

    function sleep(delay){
        var start = new Date().getTime();
        while (new Date().getTime < start + delay);
    }

    function before_run(ip){
        var run_ip = ip;
        var connections = getConnections();
        var browser_input = connections['browser_input'];
        var browser_length = browser_input.length;
        $.ajax({
            type:'POST',
            url:'../saveconnection/',
            dataType: 'json',
            data:connections,
            success:function(data){
                var result = data.result;
                if (result == "success"){
                    if (browser_length > 0){
                        $.ajax({
                            type:'POST',
                            url:'../getvars/',
                            dataType: 'json',
                            data:{"variant":browser_input},
                            success:function(data){
                                var length = data.vars;
                                var height = '0px';
                                if (length == 1){
                                    height = '130px';
                                }else if(length >= 2 && length <6){
                                    height = (60 + length * 70).toString() + 'px';
                                }else if(length >= 6){
                                    height = '480px';
                                }
                                layer.open({
                                    type: 2,
                                    title: 'Variants',
                                    skin: 'layui-layer-lan',
                                    area: ['330px', height],
                                    content: '../browseradd/',
                                    btn: ['Yes','No'],
                                    btn1:function(index, layero){
                                        var iframeWin = window[layero.find('iframe')[0]['name']];
                                        var variant_list = []
                                        var variant_json = {};
                                        for (var i=0;i<browser_input.length;i++){
                                            var id = browser_input[i];
                                            var divs = iframeWin.document.getElementsByName(id);
                                            var value = "";
                                            for (var j=0;j<divs.length;j++){
                                                var div = divs[j];
                                                if (j !=0){
                                                    value = value + "," + div.value;
                                                }else{
                                                    value = value + div.value;
                                                }
                                            }
                                            variant_json[id] = value;
                                            variant_list.push(id);
                                        };
                                        layer.close(index);
                                        variant_json.variant = variant_list;
                                        $.ajax({
                                            type:'POST',
                                            url:'../changevariant/',
                                            dataType: 'json',
                                            data:variant_json,
                                            success:function(data){
                                                var result = data.result;
                                                if (result == "success"){
                                                    run(run_ip);
                                                }else{
                                                    layer.alert('Update Variants Failed!', {
                                                        title: 'Error Message',
                                                        skin: 'layui-layer-lan',
                                                        closeBtn: 1,
                                                        icon: 5,
                                                        offset: 'rb',
                                                        btn: false,
                                                    });
                                                    return "failed";
                                                }
                                            }
                                        });
                                    },
                                    btn2:function(index, layero){
                                        layer.close(index);
                                        return "cancel";
                                    },
                                })
                            }
                        })
                    }else{
                        run(run_ip);
                    }
                }else{
                  layer.alert("Incorrect connection!", {
                    title: 'Failed Process',
                    skin: 'layui-layer-lan',
                    closeBtn: 1,
                    icon: 5,
                    offset: 'rb',
                    btn: false,
                  });
                }
            }
        })
    }

    function run(ip){
        $("#group_id").val("");
        var connections = getConnections();
        if (ip == "server"){
          $("#cycle").val(0);
          $.ajax({
            type:'POST',
            url:'../run/',
            dataType: 'json',
            data:connections,
            success:function(data){
              var result = data['result'];
              if (result == "success"){
                layer.alert('Run successfully!', {
                  title: 'Info',
                  skin: 'layui-layer-lan',
                  closeBtn: 1,
                  icon: 6,
                  offset: 'rb',
                  btn: false,
                });
              }else{
                var msg = data['msg'];
                var divID = data['step'];
                var groupID = data['group_id'];
                if (groupID == "" || groupID == "null" || typeof(groupID) == "undefined"){
                  var div = document.getElementById(divID);
                  try{
                      div.children[0].setAttribute("style","border:3px solid #ac2925");
                  }catch(err){
                      next;
                  }
                }else{
                  var div = document.getElementById(groupID)
                  try{
                      div.children[0].setAttribute("style","border:3px solid #ac2925");
                      $("#group_id").val(divID);
                  }catch(err){
                      next;
                  }
                }
                layer.alert(msg, {
                  title: 'Failed Process',
                  skin: 'layui-layer-lan',
                  closeBtn: 1,
                  icon: 5,
                  offset: 'rb',
                  btn: false,
                });
              }
            },
            error:function(){
              var cylce = $("#cycle").val();
              if(typeof(cycle) == "undefined"){
                  cycle = 1;
                  $("#cycle").val(cycle);
                  sleep(1000);
                  run("server");
              }else if (cylce < 5) {
                  cycle = cycle + 1;
                  $("#cycle").val(cycle);
                  sleep(1000);
                  run("server");
              }
            }
          });
        }else{
          if (ip == "fix"){
            layer.prompt({btn:['Yes','No'], title: 'Please input your ip address', formType: 3}, function(pass, index){
              layer.close(index);
              ip = pass;
              $.ajax({
                type:'POST',
                url:'../getuser/',
                dataType: 'json',
                data:connections,
                success:function(data){
                  connections.username = data['username'];
                  url = 'http://' + ip + ':8080/';
                  var run_time = $("#run_time").val();
                  if (run_time == 1){
                      url = url + "start";
                  }
                  $.ajax({
                    url: url,
                    type:'post',
                    dataType: 'json',
                    data: connections,
                    success: function(data){
                      var result = data['result'];
                      if (result == "success"){
                        layer.alert('Run successfully!', {
                          title: 'Info',
                          skin: 'layui-layer-lan',
                          closeBtn: 1,
                          icon: 6,
                          offset: 'rb',
                          btn: false,
                        });
                      }else{
                        var msg = data['msg'];
                        var divID = data['step'];
                        var error_msg = data['conso'];
                        console.log(error_msg);
                        var div = document.getElementById(divID);
                        try{
                          div.children[0].setAttribute("style","border:3px solid #ac2925");
                        }catch(err){
                          console.log(err);
                        }
                        layer.alert(msg, {
                          title: 'Failed Process',
                          skin: 'layui-layer-lan',
                          closeBtn: 1,
                          icon: 5,
                          offset: 'rb',
                          btn: false,
                        });
                      }
                    },
                    error:function(XMLHttpRequest, textStatus, errorThrown){
                      var run_time = $("#run_time").val();
                      if (run_time == 0 || typeof(run_time) == "undefined"){
                          $("#run_time").val(1);
                          run('own');
                      }else{
                          $("#run_time").val(0);
                          layer.alert("Please start/restart your robot!", {
                          title: 'Failed Process',
                          skin: 'layui-layer-lan',
                          closeBtn: 1,
                          icon: 5,
                          offset: 'rb',
                          btn: false,
                        });
                      }
                    }
                  });
                },
                error:function(){
                  alert("error");
                },
              })
            })
          }else{
            if (ip == "own"){
                ip = $("#ip").val();
                if (typeof(ip)=="undefined" || ip==""){
                  ip = "{{ip}}";
                }
            }
            $.ajax({
              type:'POST',
              url:'../getuser/',
              dataType: 'json',
              data:connections,
              success:function(data){
                connections.username = data['username'];
                url = 'http://' + ip + ':8080/';
                var run_time = $("#run_time").val();
                if (run_time == 1){
                    url = url + "start";
                }
                $.ajax({
                  url: url,
                  type:'post',
                  dataType: 'json',
                  data: connections,
                  success: function(data){
                    var result = data['result'];
                    if (result == "success"){
                      layer.alert('Run successfully!', {
                        title: 'Info',
                        skin: 'layui-layer-lan',
                        closeBtn: 1,
                        icon: 6,
                        offset: 'rb',
                        btn: false,
                      });
                    }else{
                      var msg = data['msg'];
                      var divID = data['step'];
                      var error_msg = data['conso'];
                      console.log(error_msg);
                      var div = document.getElementById(divID);
                      try{
                        div.children[0].setAttribute("style","border:3px solid #ac2925");
                      }catch(err){
                        console.log(err);
                      }
                      layer.alert(msg, {
                        title: 'Failed Process',
                        skin: 'layui-layer-lan',
                        closeBtn: 1,
                        icon: 5,
                        offset: 'rb',
                        btn: false,
                      });
                    }
                  },
                  error:function(XMLHttpRequest, textStatus, errorThrown){
                    var run_time = $("#run_time").val();
                    if (run_time == 0 || typeof(run_time) == "undefined"){
                        $("#run_time").val(1);
                        run('own');
                    }else{
                        $("#run_time").val(0);
                        layer.alert("Please start/restart your robot!", {
                        title: 'Failed Process',
                        skin: 'layui-layer-lan',
                        closeBtn: 1,
                        icon: 5,
                        offset: 'rb',
                        btn: false,
                      });
                    }
                  }
                });
              },
	          error:function(){
		        alert("error");
	          },
            })
          }
        }

    }
    function book(ip){
        var index = layer.open({
          type: 2,
          title: 'Choose Timing Method',
          skin: 'layui-layer-lan',
          area: ['650px', '600px'],
          maxmin: true,
          content: '../booktask/?ip='+ip,
          })
        layer.full(index);
    }

    function clean(){
        div_json = {};
        div_selection_list = [];
        $("#drop_id").val("");
        $("#group_id").val("");
        $("#selectfile").val("");
        var div_json = {};
        var div_selection_list = [];
        var divs = $('#diagramContainer-main').find("div");
        parent.$("#open_file_path").html("");
        for (var i=0;i<divs.length;i++){
          var div = divs[i];
          div.remove();
          try{
            var id = div.id;
            jsPlumb.removeAllEndpoints(id);
          }catch(err){
            next;
          }
        }
        $.ajax({
          type:'POST',
          url:'../deleteaction/',
          dataType:'json',
          data:{},
          success:function(data){
            var result = data['result'];
            },
        });
    }

    function saveProcess(type){
        $("#type").val(type);
        var btn = "";
        if (type != "release"){
          layer.open({
            type: 2,
            title: 'Files List',
            skin: 'layui-layer-lan', //加上边框
            area: ['330px', '350px'], //宽高
            maxmin: true,
            content: '../openfile/?type='+type,
            btn: ['Save','Cancel','New Folder'],
            btn1:function(index, layero){
                var className = document.getElementsByClassName("layui-layer-btn0")[0].className;
                if (className.indexOf("disable") != -1){
                    return false;
                }
                var body = layer.getChildFrame('body', index);
                var pass = body.find("#text").val()
                if (pass == null || pass == ""){
                    var iframeWin = window[layero.find('iframe')[0]['name']];
                    iframeWin.lay_tips('Please input your file name!','#_easyui_textbox_input1');
                    return false;
                }else{
                    var filepath = "";
                    var iframeWin = window[layero.find('iframe')[0]['name']];
                    var selectfile = iframeWin.getRow();
                    if (selectfile.indexOf(".py") > 0){
                        var files = selectfile.split("\\");
                        filepath = files[0];
                        for (var i=1;i<files.length-1;i++){
                            filepath = filepath + "\\" + files[i];
                        }
                        filepath = filepath + "\\" + pass + ".py";
                    }else{
                        filepath = selectfile + "\\" + pass + ".py";
                    }
                    var param = getConnections();
                    param.name = filepath;
                    param.type = "file";
                    $.ajax({
                        type:'POST',
                        url:'../filejudge/',
                        dataType:'json',
                        data:param,
                        success:function(data){
                            var result = data['result'];
                            if (result == true){
                                var message = data['msg'];
                                if (message == "success"){
                                    layer.confirm('Are you sure to overwrite?', {
                                    title: "Overwrite Confirmation",
                                    btn: ['Yes','No']
                                    }, function(index){
                                        layer.close(index);
                                        var connections = getConnections();
                                        var childs = document.getElementsByClassName("jnode-panel");
                                        var list = new Array;
                                        for (var i=0;i<childs.length;i++){
                                          var json = {};
                                          var child = childs[i];
                                          json.id = child.id;
                                          try{
                                            json.jnodeClass = child.firstElementChild.className.replace("jnode-box ","");
                                          }catch(err){
                                            continue;
                                          }
                                          if (json.jnodeClass.indexOf("bdc-success") != -1){
                                            json.jnode = "start"
                                          }else if(json.jnodeClass.indexOf("bdc-danger") != -1 || json.jnodeClass.indexOf("bdc-wait") != -1){
                                            json.jnode = "end"
                                          }else if(json.jnodeClass.indexOf("bdc-warning") != -1){
                                            json.jnode = "judge"
                                          }else{
                                            json.jnode = "task"
                                          }
                                          json.jnodeHtml = child.firstElementChild.innerHTML;
                                          json.left = child.offsetLeft;
                                          json.top = child.offsetTop;
                                          json_2_str = JSON.stringify(json);
                                          list.push(json_2_str);
                                        }
                                        connections.type = type;
                                        connections.name = filepath;
                                        connections.html = list;
                                        $.ajax({
                                              type:'POST',
                                              url:'../saveprocess/',
                                              dataType:'json',
                                              data:connections,
                                              beforeSend:function(){
                                                layer.load(2);
                                              },
                                              success:function(data){
                                                layer.closeAll('loading');
                                                var result = data['result'];
                                                var used_list = data['used_list'];
                                                if (result == "success"){
                                                    if (used_list.length == 0){
                                                      layer.msg('Saved successfully!', {
                                                          time: 3000,
                                                          icon:6,
                                                      });
                                                    }else{
                                                      var content = '<div style="padding: 50px; line-height: 22px; background-color: #393D49; color: #fff; font-weight: 300;">Save successfully, this process is used in below process!<br><br>'
                                                      for (var j=0;j<used_list.length;j++){
                                                          content = content + used_list[j] + '<br>';
                                                      }
                                                      content = content + '</div>';
                                                      layer.open({
                                                          type: 1
                                                          ,title: false //不显示标题栏
                                                          ,closeBtn: false
                                                          ,area: '400px;'
                                                          ,shade: 0.8
                                                          ,id: 'Releated Process' //设定一个id，防止重复弹出
                                                          ,btn: ['Get it']
                                                          ,btnAlign: 'c'
                                                          ,moveType: 1 //拖拽模式，0或者1
                                                          ,content: content
                                                      })
                                                    }
                                                }else{
                                                    layer.msg('Saved successfully,but some error with your process!', {
                                                      time: 3000,
                                                      icon:5,
                                                    });
                                                }
                                              },
                                        });
                                    })
                                }else{
                                    layer.msg(message, {
                                      time: 3000,
                                      icon:5,
                                    });
                                }
                            }else{
                                layer.close(index);
                                var connections = getConnections();
                                var childs = document.getElementsByClassName("jnode-panel");
                                var list = new Array;
                                for (var i=0;i<childs.length;i++){
                                  var json = {};
                                  var child = childs[i];
                                  json.id = child.id;
                                  try{
                                    json.jnodeClass = child.firstElementChild.className.replace("jnode-box ","");
                                  }catch(err){
                                    continue;
                                  }
                                  if (json.jnodeClass.indexOf("bdc-success") != -1){
                                    json.jnode = "start"
                                  }else if(json.jnodeClass.indexOf("bdc-danger") != -1 || json.jnodeClass.indexOf("bdc-wait") != -1){
                                    json.jnode = "end"
                                  }else if(json.jnodeClass.indexOf("bdc-warning") != -1){
                                    json.jnode = "judge"
                                  }else{
                                    json.jnode = "task"
                                  }
                                  json.jnodeHtml = child.firstElementChild.innerHTML;
                                  json.left = child.offsetLeft;
                                  json.top = child.offsetTop;
                                  json_2_str = JSON.stringify(json);
                                  list.push(json_2_str);
                                }
                                connections.type = type;
                                connections.name = filepath;
                                connections.html = list;
                                $.ajax({
                                      type:'POST',
                                      url:'../saveprocess/',
                                      dataType:'json',
                                      data:connections,
                                      beforeSend:function(){
                                        layer.load(2);
                                      },
                                      success:function(data){
                                        layer.closeAll('loading');
                                        var result = data['result'];
                                        if (result == "success"){
                                            layer.msg('Saved successfully!', {
                                              time: 3000,
                                              icon:6,
                                            });
                                        }else{
                                            var message = data['msg'];
                                            layer.msg(message, {
                                              time: 3000,
                                              icon:5,
                                            });
                                        }
                                      },
                                });
                            }
                        }
                    })
                }
            },
            btn3:function(index, layero){
                var className = document.getElementsByClassName("layui-layer-btn2")[0].className;
                if (className.indexOf("disable") != -1){
                    return false;
                }
                var body = layer.getChildFrame('body', index);
                var pass = body.find("#text").val()
                if (pass == null || pass == ""){
                    var iframeWin = window[layero.find('iframe')[0]['name']];
                    iframeWin.lay_tips('Please input your folder name!','#_easyui_textbox_input1');
                    return false;
                }else{
                    var filepath = "";
                    var iframeWin = window[layero.find('iframe')[0]['name']];
                    var selectfile = iframeWin.getRow();
                    if (selectfile.indexOf(".py") > 0){
                        var files = selectfile.split("\\");
                        filepath = files[0];
                        for (var i=1;i<files.length-1;i++){
                            filepath = filepath + "\\" + files[i];
                        }
                        filepath = filepath + "\\" + pass;
                    }else{
                        filepath = selectfile + "\\" + pass;
                    }
                    param = {"name":filepath,"type":"folder"};
                    $.ajax({
                        type:'POST',
                        url:'../filejudge/',
                        dataType:'json',
                        data:param,
                        success:function(data){
                            var result = data['result'];
                            if (result == true){
                                layer.msg('You do not have the authority!', {time: 2000});
                            }else{
                                var operation = data['operation'];
                                if (operation == "success"){
                                    layer.msg('Create folder successfully!', {
                                        time: 1000,
                                        icon:6,
                                    });
                                    iframeWin.setSelect();
                                    iframeWin.FindData();
                                }else{
                                    layer.msg('Create folder failed!', {
                                        time: 1000,
                                        icon:5,
                                    });
                                }
                            }
                        }
                    })
                }
                return false;
            },
            success: function(layero, index){
              var btns = document.getElementsByClassName("layui-layer-btn0");
              if (type == "public"){
                  {% if 'Draw_Process.views_menu_file_save_public_save' not in perms %}
                  $(".layui-layer-btn0").addClass("layui-disabled")
                  {% endif %}
                  {% if 'Draw_Process.views_menu_file_save_public_cancel' not in perms %}
                  $(".layui-layer-btn1").addClass("layui-disabled")
                  {% endif %}
                  {% if 'Draw_Process.views_menu_file_save_public_new_folder' not in perms %}
                  $(".layui-layer-btn2").addClass("layui-disabled")
                  {% endif %}
              }else if(type == "private"){
                  {% if 'Draw_Process.views_menu_file_save_private_save' not in perms %}
                  $(".layui-layer-btn0").addClass("layui-disabled")
                  {% endif %}
                  {% if 'Draw_Process.views_menu_file_save_private_cancel' not in perms %}
                  $(".layui-layer-btn1").addClass("layui-disabled")
                  {% endif %}
                  {% if 'Draw_Process.views_menu_file_save_private_new_folder' not in perms %}
                  $(".layui-layer-btn2").addClass("layui-disabled")
                  {% endif %}
              }
          }
          })
        }else{
          var index = layer.open({
            type: 2,
            title: 'Release Process',
            skin: 'layui-layer-lan', //加上边框
            area: ['330px', '350px'], //宽高
            maxmin: true,
            content: '../releasefile/',
            btn: ['Release','Cancel','New Folder'],
            btn1:function(index, layero){
                var className = document.getElementsByClassName("layui-layer-btn0")[0].className;
                if (className.indexOf("disable") != -1){
                    return false;
                }
                var body = layer.getChildFrame('body', index);
                var selected_path = body.find("#selected_path").val()
                var selected_file = body.find("#selected_file").val()
                if (selected_path == null || selected_path == ""){
                    return false;
                }else{
                    var folder = body.find("#selected_folder2").val();
                    var iframeWin = window[layero.find('iframe')[0]['name']];
                    var filepath = folder + "\\" + selected_file + ".py";
                    param = {"org_file":selected_path,"new_folder":folder,"copy_file":filepath,"copy":"no"};
                    $.ajax({
                        type:'POST',
                        url:'../releasecopy/',
                        dataType:'json',
                        data:param,
                        success:function(data){
                            var result = data['result'];
                            if (result == true){
                                layer.confirm('Are you sure to overwrite?', {
                                  title: "Overwrite Confirmation",
                                  btn: ['Yes','No']
                                  }, function(index){
                                      param = {"org_file":selected_path,"new_folder":folder,"copy_file":filepath,"copy":"yes"};
                                      $.ajax({
                                          type:'POST',
                                          url:'../releasecopy/',
                                          dataType:'json',
                                          data:param,
                                          success:function(data){
                                              var operation = data['operation'];
                                              if (operation == "success"){
                                                  layer.msg('Release process successfully!', {
                                                      time: 1000,
                                                      icon:6,
                                                  });
                                                  iframeWin.reload('tree2');
                                              }else{
                                                  layer.msg('Release process failed!', {
                                                      time: 1000,
                                                      icon:5,
                                                  });
                                              }
                                          }
                                      })
                                   })
                            }else{
                                var operation = data['operation'];
                                if (operation == "success"){
                                    layer.msg('Release process successfully!', {
                                        time: 1000,
                                        icon:6,
                                    });
                                    iframeWin.reload('tree2');
                                }else{
                                    layer.msg('Release process failed!', {
                                        time: 1000,
                                        icon:5,
                                    });
                                }
                            }
                        }
                    })
                }
                return false;
            },
            btn3:function(index, layero){
                var className = document.getElementsByClassName("layui-layer-btn2")[0].className;
                if (className.indexOf("disable") != -1){
                    return false;
                }
                var body = layer.getChildFrame('body', index);
                var folder_name = body.find("#new_folder").val()
                if (folder_name == null || folder_name == ""){
                    return false;
                }else{
                    var folder = body.find("#selected_folder2").val();
                    var iframeWin = window[layero.find('iframe')[0]['name']];
                    var filepath = folder + "\\" + folder_name;
                    param = {"name":filepath,"type":"folder"};
                    $.ajax({
                        type:'POST',
                        url:'../releasejudge/',
                        dataType:'json',
                        data:param,
                        success:function(data){
                            var result = data['result'];
                            if (result == true){
                                layer.msg('The folder already exists!', {time: 2000});
                            }else{
                                var operation = data['operation'];
                                if (operation == "success"){
                                    layer.msg('Create folder successfully!', {
                                        time: 1000,
                                        icon:6,
                                    });
                                    iframeWin.reload('tree2');
                                }else{
                                    layer.msg('Create folder failed!', {
                                        time: 1000,
                                        icon:5,
                                    });
                                }
                            }
                        }
                    })
                }
                return false;
            },
            success: function(layero, index){
              var btns = document.getElementsByClassName("layui-layer-btn0");
              {% if 'Draw_Process.views_menu_file_save_release_release' not in perms %}
              $(".layui-layer-btn0").addClass("layui-disabled")
              {% endif %}
              {% if 'Draw_Process.views_menu_file_save_release_cancel' not in perms %}
              $(".layui-layer-btn1").addClass("layui-disabled")
              {% endif %}
              {% if 'Draw_Process.views_menu_file_save_release_new_folder' not in perms %}
              $(".layui-layer-btn2").addClass("layui-disabled")
              {% endif %}
            }
          })
          layer.full(index);
        }

    }
    function change(variant){
        var id = variant.id;
        var i = variant['children'][1]['children'][0];
        var i_class = i['className'];
        if (i_class == "fa fa-chevron-up"){
            i.className = "fa fa-chevron-down";
            var classname = id + " show";
            var classname2 = id + " hide";
            var elements = document.getElementsByClassName(classname);
            for (var i in elements){
                var element = elements[i];
                element.className = classname2;
            }
        }else{
            i.className = "fa fa-chevron-up";
        }
    }
    function adjust(divId){
        var div = document.getElementById(divId);
        var name = $("#name").val();
        if (name != "" && name != null){
            var label = document.getElementsByName(divId)[0];
            label.innerText = name;
            label.style.display = "block";
        }else{
            var label = document.getElementsByName(divId)[0];
            label.innerText = name;
            label.style.display = "none";
        }
    }
    function labelChange(id1,id2){
        var labels = document.getElementsByClassName("_jsPlumb_overlay");
        var text1 = document.getElementById(id1).innerText;
        var div = document.getElementById(id2);
        var text2 = document.getElementById(id2).innerText;
        var text = text1 + "->" + text2;
        for (var i=0;i<labels.length;i++){
            var label = labels[i];
            var labelText = label.innerText;
            if (labelText == text){
                label.setAttribute('name',id2);
                break;
            }
        }
    }

    function rearrangement(){
        var main_height = $("#diagramContainer-main").height();
        var qtys = parseInt(main_height/70);
        var connections = getConnections();
        $.ajax({
            type:'POST',
            url:'../saveconnection/',
            dataType: 'json',
            data:connections,
            success:function(data){
                var result = data.result;
                var len = connections.length + 1;
                var startID = connections.startID;
                var width = 0;
                var id_list = new Array;
                var ini_top = 8;
                var ini_height = 70;
                var ini_left = 20;
                var direction1 = "BottomCenter";
                var direction2 = "TopCenter";
                var lastID = "";
                var con_list = []
                for (var i=0;i<len;i++){
                    var con_json = {};
                    var divs_json = {};
                    var div = document.getElementById(startID);
                    var div_width = div.offsetWidth;
                    var border = $("#"+startID).children(":first").css('border');
                    if (width < div_width){
                        width = div_width;
                    }
                    divs_json.id = startID;
                    con_json.id = startID;
                    con_json.direction1 = direction1;
                    con_json.direction2 = direction2;
                    divs_json.jnode = div.children[0].innerText;
                    divs_json.jnodeClass = div.children[0].className;
                    divs_json.jnodeHtml = div.children[0].innerHTML;
                    divs_json.width = div_width;
                    divs_json.border = border;
                    id_list.push(divs_json);
                    jsPlumb.removeAllEndpoints(startID);
                    div.remove();
                    if ((i+1)%qtys == 0 || i==len-1){
                        if ((i+1)%qtys == 0){
                            con_json.direction1 = "RightMiddle";
                            con_json.direction2 = "LeftMiddle";
                        }
                        for (var j=0;j<id_list.length;j++){
                            var dataObj = {};
                            var div_id = id_list[j].id;
                            dataObj.id = id_list[j].id;
                            dataObj.jnode = id_list[j].jnode;
                            dataObj.jnodeClass = id_list[j].jnodeClass;
                            var div_border = id_list[j].border;
                            var class_name = id_list[j].jnodeClass;
                            if (class_name.indexOf("jnode-diamond") != -1){
                                ini_top = ini_top - 15;
                            }
                            dataObj.jnodeHtml = id_list[j].jnodeHtml;
                            dataObj.left = parseFloat(ini_left+(width-id_list[j].width)/2);
                            dataObj.top = parseFloat(ini_top);
                            $("#left").val(dataObj.left);
                            $("#top").val(dataObj.top);
                            $("#width").val(id_list[j].width);
                            $("#arrange").val("yes");
                            ini_top = ini_top + ini_height;
                            if (class_name.indexOf("jnode-diamond") != -1){
                                ini_top = ini_top + 15;
                            }
                            var targetHtml = Mustache.render($("#jnode-template").html(), dataObj);
                            $("#diagramContainer-main").append(targetHtml);
                            var div = document.getElementById(div_id);
                            div.children[0].setAttribute("style","border:" + div_border);
                            jsPlumb.draggable(id_list[j].id, {containment: 'parent'});
                            visioConfig.baseArchors.forEach(function (key) {
                                jsPlumb.addEndpoint(
                                    id_list[j].id,
                                        {
                                            anchors: key,
                                            connectorOverlays: [
                                                ["Arrow", {width: 10, length: 10, location: 1, id: "arrow",visible: "false"}],
                                                ["Label", {id: "myLabel", cssClass: "connectorLabel",visible: "false", events:{
                                                    "click":function (label, evt) {
                                                        console.log("clicked on label for connection",label.component);
                                                    }
                                                }}]
                                            ]
                                        },
                                    visioConfig.hollowCircle);
                              });
                              $("#"+id_list[j].id).on("mouseenter", ".jnode-box", function () {
                                  var left = 10,top = 18,right = 10,top=33;
                                  $(this).append('<i class="fa fa-trash-o" style="position:absolute;color:#fff;left:'+left+'px;top:'+top+'px;z-index:12;"/>');
                                  $(this).append('<i class="fa fa-cog" style="position:absolute;color:#fff;right:'+right+'px;top:'+top+'px;z-index:12;"/>');
                              }).on("mouseleave", ".jnode-box", function () {
                                  $(".fa-trash-o").remove();
                                  $(".fa-cog").remove();
                              }).on("click", ".fa-trash-o", function () {
                                  var text = $(this).parent()[0].innerText;
                                  var thisDiv = $(this).parent();
                                  var parentDiv = $(this).parent()[0].parentElement;
                                  var id = $(this).parent()[0].parentElement.id;
                                  var json = getConnections();
                                  var nodeNo = json[id+"nodeNo"];
                                  layer.confirm('Are you sure to delete?', {
                                  title: "Delete Confirmation",
                                  btn: ['Yes','No']
                                  }, function(index){
                                      jsPlumb.removeAllEndpoints(id);
                                      thisDiv.remove();
                                      parentDiv.remove();
                                      layer.close(index);
                                      var param = {"name":text,"nodeNo":nodeNo,"divId":id}
                                      $.ajax({
                                          type:'POST',
                                          url:'../deletevariant/',
                                          dataType:'json',
                                          data:param,
                                          success:function(data){
                                          }
                                      })
                                   })
                              }).on("click", ".fa-cog", function () {
                                  var text = $(this).parent()[0].innerText;
                                  var parent_div = $(this).parent()[0];
                                  var id = parent_div.parentElement.id;
                                  var color = parent_div.style.borderColor;
                                  if (typeof color != "undefined" && color != null && color != ""){
                                      $("#borderColor").val(color);
                                  }else{
                                      $("#borderColor").val("");
                                  }
                                  parent_div.setAttribute("style","background:#d58512;border:3px solid #d58512;");
                                  generateTools(id,text);
                              }).on("dblclick", ".jnode-box",function(){
                                  var backgroundColor = $(this).css("background-color");
                                  if (backgroundColor != "rgb(146, 208, 80)"){
                                      var select_json_2_str = JSON.stringify(div_selection_list);
                                      var div = $(this).parent()[0];
                                      var id = $(this).parent()[0].id;
                                      var innerText = div.innerText;
                                      if (innerText !="Start" && innerText != "End"){
                                          if (select_json_2_str.indexOf(id) == -1){
                                              $(div).children(":first").css({"background-color":"#5FB878"});
                                              var color = "";
                                              var className = div.firstElementChild.className;
                                              if (className.indexOf("bdc-success") != -1){
                                                  color = "#4cae4c";
                                              }else if(className.indexOf("bdc-primary") != -1){
                                                  color = "#122b40";
                                              }else if(className.indexOf("bdc-warning") != -1){
                                                  color = "#4F6228";
                                              }else if(className.indexOf("bdc-danger") != -1){
                                                  color = "#ac2925";
                                              }else if(className.indexOf("bdc-wait") != -1){
                                                  color = "#215967";
                                              }else if(className.indexOf("bdc-process") != -1){
                                                  color = "#92D050";
                                              }
                                              var jnode_html = div.firstElementChild.innerHTML;
                                              div_selection_list.push(id);
                                              div_json[id] = color;
                                              div_json[id+"className"] = className;
                                              div_json[id+"jnodeHtml"] = jnode_html;
                                          }
                                      }
                                  }
                            });
                        }
                        if (ini_height == 70){
                            direction1 = "TopCenter";
                            direction2 = "BottomCenter";
                            ini_top = 70*qtys - 62;
                            ini_height = -70;
                            ini_left = ini_left + width + 20;
                            id_list = new Array;
                            j = 0;
                        }else{
                            direction1 = "BottomCenter";
                            direction2 = "TopCenter";
                            ini_top = 8;
                            ini_height = 70;
                            ini_left = ini_left + width + 20;
                            id_list = new Array;
                            j = 0;
                        }
                    }
                    con_list.push(con_json);
                    startID = connections[startID];
                }
                $.ajax({
                  type:'POST',
                  url:'../processnames/',
                  dataType:'json',
                  data:{},
                  beforeSend:function(){
                    layer.load(2);
                  },
                  success:function(data){
                    layer.closeAll('loading');
                    var name_list = data.list;
                    var name_json = {};
                    for (l=0;l<name_list.length;l++){
                        var name_id = name_list[l].id;
                        var label_name = name_list[l].name;
                        name_json[name_id] = label_name;
                    }
                    for (i=0;i<len-1;i++){
                        var id1 = con_list[i].id;
                        var div = document.getElementById(id1);
                        $("#left").val(div.offsetLeft);
                        $("#top").val(div.offsetTop);
                        $("#width").val(div.offsetWidth);
                        var id2 = con_list[i+1].id;
                        var next_div = document.getElementById(id2);
                        $("#next_left").val(next_div.offsetLeft);
                        $("#next_top").val(next_div.offsetTop);
                        $("#next_width").val(next_div.offsetWidth);
                        var direction1 = con_list[i].direction1;
                        var direction2 = con_list[i].direction2;
                        $("#next").val("no");
                        var label_id = "label_" + id2;
                        var c = jsPlumb.connect({
                            anchors: [direction1,direction2,"_jsPlumb_endpoint_anchor"],
                            endpoint: ['Dot', { radius: 2, strokeStyle: '#1e8151',fillStyle: 'transparent',lineWidth: 2}],
                            source: id1,
                            target: id2,
                            hoverPaintStyle: {lineWidth: 2, strokeStyle: "#d58512", outlineWidth: 2, outlineColor: "transparent"},
                            connector: ["Flowchart", {stub: [5, 10], gap: 5, cornerRadius: 5, alwaysRespectStubs: true}],
                            paintStyle:{lineWidth: 2,strokeStyle: '#337ab7',joinstyle: 'round',outlineColor: 'transparent',outlineWidth: 2},
                            overlays: [
                                ["Arrow",{id:"arrow",length:10,location:1,visible:false,width:10}],
                                ["Label",{id:"myLabel",name:id2,visible:false,cssClass:"connectorLabel"}]
                            ],
                        })
                        var label = c.getOverlay("myLabel");
                        var canvas = label.canvas;
                        canvas.setAttribute('name',id2);
                        var label_value = name_json[id2];
                        if (label_value == "" || label_value == null || typeof(label_value) == "undefined"){
                            label.setLabel("");
                        }else{
                            label.setLabel(label_value);
                            label.setVisible(true);
                        }
                    }
                    $("#arrange").val("");
                  },
                })
            }
        })
    }
    function reloadJS(id,newJS){
        var oldjs = null;
        var t = null;
        var oldjs = document.getElementById(id);
        if (oldjs) oldjs.parentNode.removeChild(oldjs);
        var scriptObj = document.createElement("script");
        scriptObj.src = newJS;
        scriptObj.type = "text/javascript";
        scriptObj.id = id;
        document.getElementsByTagName("head")[0].appendChild(scriptObj);
    }
    function target(){
        document.body.style.cursor = "pointer";
        current_ip = $("#ip").val();
        var url = '';
        if (current_ip == "10.190.11.142"){
          url = '../target/';
        }else if(current_ip == "" || current_ip == "null" || typeof(current_ip) == "undefined"){
          current_ip = "{{ip}}";
          url = 'http://' + current_ip + ':8080/target';
        }else{
          url = 'http://' + current_ip + ':8080/target';
        }
        if($("#element_id").length>0){
          $.ajax({
            type:'POST',
            url:url,
            dataType:'json',
            data:{},
            beforeSend:function(){
              layer.load(2);
            },
            success:function(data){
              layer.closeAll('loading');
              var result = data['result'];
              if (result == "success"){
                var sap_id = data['sap_id'];
                try{
                  $("#element_id").val(sap_id);
                }catch(err){
                  layer.msg('Input sap id failed!', {
                    time: 1000,
                    icon:5,
                  });
                }
                document.body.style.cursor = "default";
              }else{
                var message = data['msg'];
                layer.msg(message, {
                  time: 1000,
                  icon:5,
                });
              }
            }
          })
        }else if($("#element_name").length>0){
          $.ajax({
            type:'POST',
            url:url,
            dataType:'json',
            data:{},
            beforeSend:function(){
              layer.load(2);
            },
            success:function(data){
              layer.closeAll('loading');
              var sap_id = data['sap_id'];
              try{
                $("#element_name").val(sap_id);
              }catch(err){
                layer.msg('Input sap id failed!', {
                  time: 1000,
                  icon:5,
                });
              }
              document.body.style.cursor = "default";
            }
          })
        }else{
          layer.msg('Can not find sap id field!', {
            time: 1000,
            icon:5,
          });
          document.body.style.cursor = "default";
        }
    }
    window.onresize = function(){
        var window_height = $(window).height() - 30;
        var window_width = $(window).width();
        $("#diagramContainer-main").height(window_height);
        $("#diagramContainer-control").height(window_height);
        $("#diagramContainer-left").height(window_height);
        var main_height = $("#diagramContainer-main").height();
        var drop_down_divs = $(".dropdownlink");
        var sum_height = 0;
        for (i=0;i<drop_down_divs.length;i++){
            var drop_down_div = drop_down_divs[i];
            sum_height = sum_height + drop_down_div.offsetHeight;
        }
        var remain_height = main_height - sum_height;
        var sub_menu_items = $(".submenuItems");
        for (j=0;j<sub_menu_items.length;j++){
            var sub_menu_item = sub_menu_items[j];
            sub_menu_item.style.height = remain_height + "px";
        }
        $("#diagramContainer-left").resize(function(){
            return false;

        });

    }
    window.onload = function(e) {
        e = e || window.event;
        var start_drag = "";
        // startX, startY 为鼠标点击时初始坐标
        // diffX, diffY 为鼠标初始坐标与 box 左上角坐标之差，用于拖动
        var startX, startY, diffX, diffY, copyX, copyY;
        var moveX, moveY, moveId;
        // 是否拖动，初始为 false
        var dragging = false;
        // 鼠标按下
        document.ondblclick = function(e) {
            startX = e.pageX;
            startY = e.pageY;
            if(e.target.id.match(/diagramContainer-main/)) {
                var active_box = document.createElement("div");
                active_box.id = "active_box";
                active_box.className = "box";
                active_box.style.top = startY + 'px';
                active_box.style.left = startX + 'px';
                document.body.appendChild(active_box);
                active_box = null;
            }
        }
        document.onclick = function(e) {
            if(e.target.tagName.match(/SPAN/)) {
                if (e.target.parentElement.className.indexOf("jnode-box") != -1){
                    var background = e.target.parentElement.style.backgroundColor;
                    if (background == "rgb(95, 184, 120)"){
                        var id = e.target.parentElement.parentElement.id;
                        var org_color = div_json[id];
                        var div = $("#"+id);
                        $(div).children(":first").css({"background-color":org_color});
                        delete div_json[id];
                        var index = div_selection_list.indexOf(id);
                        div_selection_list.splice(index, 1)
                    }
                }
            }else if(e.target.tagName.match(/DIV/)){
                if (e.target.className.indexOf("jnode-box") != -1){
                    var background = e.target.style.backgroundColor;
                    if (background == "rgb(95, 184, 120)"){
                        var id = e.target.parentElement.id;
                        var org_color = div_json[id];
                        var div = $("#"+id);
                        $(div).children(":first").css({"background-color":org_color});
                        delete div_json[id];
                        var index = div_selection_list.indexOf(id);
                        div_selection_list.splice(index, 1)
                    }
                }
            }
        }
        document.onmousedown = function(e) {
            if(document.getElementById("active_box") !== null) {
                start_drag = "";
                var ab = document.getElementById("active_box");
                var control = document.getElementById("diagramContainer-main");
                var abx1 = ab.offsetLeft;
                var aby1 = ab.offsetTop;
                var abx2 = ab.offsetLeft + ab.offsetWidth + control.scrollLeft;
                var aby2 = ab.offsetTop + ab.offsetHeight + control.scrollTop;
                ab.removeAttribute("id");
                ab.parentNode.removeChild(ab);
                var divs = document.getElementsByClassName("jnode-box");
                for (var i=0;i<divs.length;i++){
                    var div = divs[i].parentElement;
                    var innerText = div.innerText;
                    if (innerText != "Start" && innerText != "End"){
                        var divx1 = div.offsetLeft + div.parentElement.offsetLeft;
                        var divy1 = div.offsetTop + div.parentElement.offsetTop;
                        var divx2 = divx1 + div.offsetWidth;
                        var divy2 = divy1 + div.offsetHeight;
                        if(abx1 < divx1 && abx2 > divx1){
                            if(aby1 < divy1 && aby2 > divy1){
                                var background = $(div).children(":first").css("background-color");
                                div_selection_list.push(div.id);
                                var className = div.firstElementChild.className;
                                var jnodeHtml = div.firstElementChild.innerHTML;
                                div_json[div.id] = background;
                                div_json[div.id + "className"] = className;
                                div_json[div.id + "jnodeHtml"] = jnodeHtml;
                                div.children[0].style.background = "#5FB878";
                            }else if(aby1 < divy2 && aby2 > divy2){
                                var background = $(div).children(":first").css("background-color");
                                div_selection_list.push(div.id);
                                var className = div.firstElementChild.className;
                                var jnodeHtml = div.firstElementChild.innerHTML;
                                div_json[div.id] = background;
                                div_json[div.id + "className"] = className;
                                div_json[div.id + "jnodeHtml"] = jnodeHtml;
                                div.children[0].style.background = "#5FB878";
                            }
                        }else if(abx1 < divx2 && abx2 > divx2){
                            if(aby1 < divy1 && aby2 > divy1){
                                var background = $(div).children(":first").css("background-color");
                                div_selection_list.push(div.id);
                                var className = div.firstElementChild.className;
                                var jnodeHtml = div.firstElementChild.innerHTML;
                                div_json[div.id] = background;
                                div_json[div.id + "className"] = className;
                                div_json[div.id + "jnodeHtml"] = jnodeHtml;
                                div.children[0].style.background = "#5FB878";
                            }else if(aby1 < divy2 && aby2 > divy2){
                                var background = $(div).children(":first").css("background-color");
                                div_selection_list.push(div.id);
                                var className = div.firstElementChild.className;
                                var jnodeHtml = div.firstElementChild.innerHTML;
                                div_json[div.id] = background;
                                div_json[div.id + "className"] = className;
                                div_json[div.id + "jnodeHtml"] = jnodeHtml;
                                div.children[0].style.background = "#5FB878";
                            }
                        }
                    }
                }
            }else{
                if(e.target.tagName.match(/SPAN/)) {
                    if (e.target.parentElement.className.indexOf("jnode-box") != -1){
                        var select_json_2_str = JSON.stringify(div_selection_list);
                        if (select_json_2_str.indexOf(e.target.parentElement.parentElement.id) != -1 && div_selection_list.length > 0){
                           start_drag = "yes";
                           moveId = e.target.parentElement.parentElement.id;
                           var move_div = document.getElementById(moveId);
                           moveX = parseInt(move_div.style.left.replace("px",""));
                           moveY = parseInt(move_div.style.top.replace("px",""));
                        }else{
                           start_drag = "";
                        }
                    }
                }else if(e.target.tagName.match(/DIV/)){
                    if (e.target.className.indexOf("jnode-box") != -1){
                        var select_json_2_str = JSON.stringify(div_selection_list);
                        if (select_json_2_str.indexOf(e.target.parentElement.id) != -1 && div_selection_list.length > 0){
                           start_drag = "yes";
                           moveId = e.target.parentElement.id;
                           var move_div = document.getElementById(moveId);
                           moveX = parseInt(move_div.style.left.replace("px",""));
                           moveY = parseInt(move_div.style.top.replace("px",""));
                        }else{
                           start_drag = "";
                        }
                    }
                }else{
                    start_drag = "";
                }
            }
        };
        // 鼠标移动
        document.onmousemove = function(e) {
            copyX = e.pageX;
            copyY = e.pageY;
            if(document.getElementById("active_box") !== null) {
                var ab = document.getElementById("active_box");
                if (e.pageX > startX){
                    ab.style.width = e.pageX - startX + 'px';
                }else{
                    ab.style.left = e.pageX + 'px';
                    ab.style.width = startX - e.pageX + 'px';
                }
                if (e.pageY > startY){
                    ab.style.height = e.pageY - startY + 'px';
                }else{
                    ab.style.top = e.pageY + 'px';
                    ab.style.height = startY - e.pageY + 'px';
                }
            }else{
                if (start_drag == "yes"){
                    var select_json_2_str = JSON.stringify(div_selection_list);
                    var move_div = document.getElementById(moveId);
                    try{
                        var newX = parseInt(move_div.style.left.replace("px",""));
                        var newY = parseInt(move_div.style.left.replace("px",""));
                        if (newX == moveX && newY == moveY){
                            start_drag == "";
                        }else{
                            for (var i=0;i<div_selection_list.length;i++){
                                var div_id = div_selection_list[i];
                                if (div_id != moveId){
                                    var div = document.getElementById(div_id);
                                    try{
                                        div.style.left = (parseInt(div.style.left.replace("px","")) + parseInt(move_div.style.left.replace("px","")) - moveX).toString() + "px";
                                        div.style.top = (parseInt(div.style.top.replace("px","")) + parseInt(move_div.style.top.replace("px","")) - moveY).toString() + "px";
                                    }catch{
                                        continue;
                                    }
                                }
                            }
                            moveX = parseInt(move_div.style.left.replace("px",""));
                            moveY = parseInt(move_div.style.top.replace("px",""));
                            jsPlumb.repaintEverything();
                        }
                    }catch{
                        return;
                    }

                }
            }
        };
        // 鼠标抬起
        document.onmouseup = function(e) {
            // 禁止拖动
            dragging = false;
            start_drag = "";
            if(document.getElementById("active_box") !== null) {
                var ab = document.getElementById("active_box");
                ab.removeAttribute("id");
                ab.parentNode.removeChild(ab);
            }
        };
        $(document).unbind('keydown').bind('keydown', function(e){
            if(e.keyCode  == 46){
                for (var i=0;i<div_selection_list.length;i++) {
                    var val = div_selection_list[i];
                    jsPlumb.removeAllEndpoints(val);
                    var div = $("#"+val);
			        div.remove();
                }
                div_selection_list = [];
                div_json = {};
		    }else if(e.ctrlKey && e.keyCode  == 86) {
		        var copy_mode = $("#copy_mode").val();
		        if (copy_mode == "" || copy_mode == "null" || typeof(copy_mode) == "undefined"){
		          copy_mode = "no"
		        }
                var select_json = JSON.stringify(div_json);
                if (select_json != "{}" && select_json != "" && typeof(select_json) != "undefined"){
                    var copy_list = new Array;
                    var div_top = 60;
                    var n = 0;
                    for(var i=0;i<div_selection_list.length;i++){
                        copy_json = {};
                        var div_id = div_selection_list[i];
                        if(document.getElementById(div_id)){
                            $("#"+div_id).children(":first").css({"background-color":""});
                        }
                        var left = $("#diagramContainer-left")[0].offsetWidth;
                        var top = $("#header")[0].offsetHeight;
                        var className = div_json[div_id+"className"];
                        var jnode_html = div_json[div_id+"jnodeHtml"];
                        var jnode = "";
                        if (className.indexOf("bdc-success") != -1){
                            jnode = "start";
                        }else if(className.indexOf("bdc-primary") != -1){
                            jnode = "task";
                        }else if(className.indexOf("bdc-warning") != -1){
                            jnode = "judge";
                        }else if(className.indexOf("bdc-danger") != -1){
                            jnode = "end";
                        }else if(className.indexOf("bdc-wait") != -1){
                            jnode = "wait";
                        }else if(className.indexOf("bdc-process") != -1){
                            jnode = "task";
                        }
                        var dataObj = {};
                        dataObj.id = uuid.v1();
                        dataObj.jnode = jnode;
                        dataObj.jnodeClass = className;
                        dataObj.jnodeHtml = jnode_html;
                        dataObj.left = parseFloat(copyX) - left;
                        dataObj.top = parseFloat(copyY) - top + div_top*n;
                        $("#left").val(dataObj.left);
                        $("#top").val(dataObj.top);
                        var targetHtml = Mustache.render($("#jnode-template").html(), dataObj);
                        $("#diagramContainer-main").append(targetHtml);
                        jsPlumb.draggable(dataObj.id, {containment: 'parent'});
                        visioConfig.baseArchors.forEach(function (key) {
                            jsPlumb.addEndpoint(
                                dataObj.id,
                                {
                                    anchors: key,
                                    connectorOverlays: [
                                        ["Arrow", {width: 10, length: 10, location: 1, id: "arrow",visible: "false"}],
                                        ["Label", {id: "myLabel", cssClass: "connectorLabel",visible: "false", events:{
                                            "click":function (label, evt) {
                                            console.log("clicked on label for connection",label.component);
                                            }
                                        }}]
                                    ]
                                },
                                visioConfig.hollowCircle);
                            });
                        $("#"+dataObj.id).on("mouseenter", ".jnode-box", function () {
                            var left = 10,top = 18,right = 10,top=33;
                            var backgroundColor = $(this).css("background-color");
                            if (backgroundColor == "rgb(146, 208, 80)"){
                                var divWidth = $(this).width()/2 - 3;
                                $(this).append('<i class="fa fa-trash-o" style="position:absolute;color:#fff;left:'+left+'px;top:'+top+'px;z-index:12;"/>');
                                $(this).append('<i class="fa fa-cog" style="position:absolute;color:#fff;right:'+right+'px;top:'+top+'px;z-index:12;"/>');
                                $(this).append('<i class="icon-refresh" style="position:absolute;color:#fff;left:'+divWidth+'px;top:'+4+'px;z-index:12;"/>');
                            }else{
                                $(this).append('<i class="fa fa-trash-o" style="position:absolute;color:#fff;left:'+left+'px;top:'+top+'px;z-index:12;"/>');
                                $(this).append('<i class="fa fa-cog" style="position:absolute;color:#fff;right:'+right+'px;top:'+top+'px;z-index:12;"/>');
                            }
                        }).on("mouseleave", ".jnode-box", function () {
                            $(".fa-trash-o").remove();
                            $(".fa-cog").remove();
                            try{
                                $(".icon-refresh").remove();
                            }catch(err){
                                return
                            }
                        }).on("mousedown", ".jnode-box", function () {
                            var div = $(this);
                            var text = div[0].children[0].innerText;
                            var new_text = text.replace(/ /g,"-");
                            $(this)[0].children[0].innerText = new_text;
                        }).on("mouseup", ".jnode-box", function () {
                            var div = $(this);
                            var text = div[0].children[0].innerText;
                            var new_text = text.replace(/-/g," ");
                            $(this)[0].children[0].innerText = new_text;
                        }).on("click", ".fa-trash-o", function () {
                            var text = $(this).parent()[0].innerText;
                            var thisDiv = $(this).parent();
                            var parentDiv = $(this).parent()[0].parentElement;
                            var id = $(this).parent()[0].parentElement.id;
                            var json = getConnections();
                            var nodeNo = json[id+"nodeNo"];
                            layer.confirm('Are you sure to delete?', {
                                title: "Delete Confirmation",
                                btn: ['Yes','No']
                                }, function(index){
                                    jsPlumb.removeAllEndpoints(id);
                                    thisDiv.remove();
                                    parentDiv.remove();
                                    layer.close(index);
                                    var param = {"name":text,"nodeNo":nodeNo,"divId":id}
                                    $.ajax({
                                        type:'POST',
                                        url:'../deletevariant/',
                                        dataType:'json',
                                        data:param,
                                        success:function(data){
                                        }
                                })
                            })
                        }).on("click", ".fa-cog", function () {
                            var text = $(this).parent()[0].innerText;
                            var parent_div = $(this).parent()[0];
                            var id = parent_div.parentElement.id;
                            var process_id = id;
                            var color = parent_div.style.borderColor;
                            if (typeof color != "undefined" && color != null && color != ""){
                                $("#borderColor").val(color);
                            }else{
                                $("#borderColor").val("");
                            }
                            parent_div.setAttribute("style","background:#d58512;border:3px solid #d58512;");
                            generateTools(id,text);
                        }).on("click", ".icon-refresh", function () {
                            var text = $(this).parent()[0].innerText;
                            var thisDiv = $(this).parent();
                            var id = $(this).parent()[0].parentElement.id;
                            var divHeight = $("#diagramContainer-main").height();
                            var process_id = thisDiv[0].children[0].getAttribute("name");
                            var showed_paths = process_id.split("\\");
                            var showed_path = "";
                            if (process_id.indexOf("D:\\workspace\\Python_Platform\\Draw_Process\\pyfile\\public") != -1){
                                showed_path = process_id.replace("D:\\workspace\\Python_Platform\\Draw_Process\\pyfile\\public","Public");
                            }else if(process_id.indexOf("D:\\workspace\\Python_Platform\\Draw_Process\\pyfile\\release") != -1){
                                showed_path = process_id.replace("D:\\workspace\\Python_Platform\\Draw_Process\\pyfile\\release","Release");
                            }else{
                                showed_path = "Private"
                                for (var i=6;i<showed_paths.length;i++){
                                    showed_path = showed_path + "\\" + showed_paths[i];
                                }
                            }
                            showed_path = showed_path.replace(".py","");
                            var index = layer.open({
                                type: 2,
                                title: 'Insert Process (' + showed_path + ')',
                                skin: 'layui-layer-lan',
                                area: ['650px', '600px'],
                                maxmin: true,
                                content: '../processdetail/?groupID='+id+"&divHeight="+divHeight,
                            })
                            layer.full(index);
                        }).on("dblclick", ".jnode-box",function(){
                            var backgroundColor = $(this).css("background-color");
                            if (backgroundColor != "rgb(146, 208, 80)"){
                                var select_json_2_str = JSON.stringify(div_selection_list);
                                var div = $(this).parent()[0];
                                var id = $(this).parent()[0].id;
                                var innerText = div.innerText;
                                if (innerText !="Start" && innerText != "End"){
                                    if (select_json_2_str.indexOf(id) == -1){
                                        $(div).children(":first").css({"background-color":"#5FB878"});
                                        var color = "";
                                        var className = div.firstElementChild.className;
                                        if (className.indexOf("bdc-success") != -1){
                                            color = "#4cae4c";
                                        }else if(className.indexOf("bdc-primary") != -1){
                                            color = "#122b40";
                                        }else if(className.indexOf("bdc-warning") != -1){
                                            color = "#4F6228";
                                        }else if(className.indexOf("bdc-danger") != -1){
                                            color = "#ac2925";
                                        }else if(className.indexOf("bdc-wait") != -1){
                                            color = "#215967";
                                        }else if(className.indexOf("bdc-process") != -1){
                                            color = "#92D050";
                                        }
                                        var jnode_html = div.firstElementChild.innerHTML;
                                        div_selection_list.push(id);
                                        div_json[id] = color;
                                        div_json[id+"className"] = className;
                                        div_json[id+"jnodeHtml"] = jnode_html;
                                    }
                                }
                            }
                        });
                        n = n + 1;
                        copy_json[dataObj.id] = div_id;
                        copy_list.push(JSON.stringify(copy_json));
                        }
                    div_json = {};
                    div_selection_list = new Array;
                }
                $.ajax({
                    type:'POST',
                    url:'../creatediv/',
                    dataType:'json',
                    data:{"copy_list":JSON.stringify(copy_list),"copy_mode":copy_mode},
                    success:function(data){
                        var result = data['result'];
                        if (result != "success"){
                            layer.msg("Create variant failed!", {
                                time: 3000,
                            });
                        }
                    }
                })
                div_json = {};
                div_selection_list = [];
                $("#copy_mode").val("");
		    }else if(e.ctrlKey && e.keyCode  == 67) {
		        $("#copy_mode").val("yes");
		        var select_json = JSON.stringify(div_json);
                if (select_json != "{}" && select_json != "" && typeof(select_json) != "undefined"){
                    var copy_list = new Array;
                    var div_top = 60;
                    var n = 0;
                    for(var i=0;i<div_selection_list.length;i++){
                        copy_list.push(div_selection_list[i]);
                    }
                    $.ajax({
                        type:'POST',
                        url:'../savediv/',
                        dataType:'json',
                        data:{"copy_list":JSON.stringify(copy_list)},
                        success:function(data){
                            var result = data['result'];
                            if (result != "success"){
                                layer.msg("Save steps failed!", {
                                    time: 3000,
                                });
                            }else{
                                layer.msg("Save steps successfully!", {
                                    time: 2000,
                                });
                            }
                        }
                    })
                }else{
                    $("#copy_mode").val("");
                }
		    }else if(e.altKey && e.keyCode  == 83) {
		        var param = getConnections();
                param.name = $("#selectfile").val();
                param.type = "file";
                $.ajax({
                    type:'POST',
                    url:'../filejudge/',
                    dataType:'json',
                    data:param,
                    success:function(data){
                        var result = data['result'];
                        if (result == true){
                            var message = data['msg'];
                            if (message == "success"){
                                layer.confirm('Are you sure to overwrite?', {
                                    title: "Overwrite Confirmation",
                                    btn: ['Yes','No']
                                    }, function(index){
                                        layer.close(index);
                                        var connections = getConnections();
                                        var childs = document.getElementsByClassName("jnode-panel");
                                        var list = new Array;
                                        for (var i=0;i<childs.length;i++){
                                            var json = {};
                                            var child = childs[i];
                                            json.id = child.id;
                                            try{
                                                json.jnodeClass = child.firstElementChild.className.replace("jnode-box ","");
                                            }catch(err){
                                                continue;
                                            }
                                            if (json.jnodeClass.indexOf("bdc-success") != -1){
                                                json.jnode = "start"
                                            }else if(json.jnodeClass.indexOf("bdc-danger") != -1 || json.jnodeClass.indexOf("bdc-wait") != -1){
                                                json.jnode = "end"
                                            }else if(json.jnodeClass.indexOf("bdc-warning") != -1){
                                                json.jnode = "judge"
                                            }else{
                                                json.jnode = "task"
                                            }
                                            json.jnodeHtml = child.firstElementChild.innerHTML;
                                            json.left = child.offsetLeft;
                                            json.top = child.offsetTop;
                                            json_2_str = JSON.stringify(json);
                                            list.push(json_2_str);
                                        }
                                        connections.name = $("#selectfile").val();
                                        connections.html = list;
                                        $.ajax({
                                            type:'POST',
                                            url:'../saveprocess/',
                                            dataType:'json',
                                            data:connections,
                                            beforeSend:function(){
                                                layer.load(2);
                                            },
                                            success:function(data){
                                                layer.closeAll('loading');
                                                var result = data['result'];
                                                var used_list = data['used_list'];
                                                if (result == "success"){
                                                    if (used_list.length == 0){
                                                        layer.msg('Saved successfully!', {
                                                            time: 3000,
                                                            icon:6,
                                                        });
                                                    }else{
                                                        var content = '<div style="padding: 50px; line-height: 22px; background-color: #393D49; color: #fff; font-weight: 300;">Save successfully, this process is used in below process!<br><br>'
                                                        for (var j=0;j<used_list.length;j++){
                                                            content = content + used_list[j] + '<br>';
                                                        }
                                                        content = content + '</div>';
                                                        layer.open({
                                                            type: 1
                                                            ,title: false //不显示标题栏
                                                            ,closeBtn: false
                                                            ,area: '400px;'
                                                            ,shade: 0.8
                                                            ,id: 'Releated Process' //设定一个id，防止重复弹出
                                                            ,btn: ['Get it']
                                                            ,btnAlign: 'c'
                                                            ,moveType: 1 //拖拽模式，0或者1
                                                            ,content: content
                                                        })
                                                    }
                                                }else{
                                                    layer.msg('Saved successfully,but some error with your process!', {
                                                        time: 3000,
                                                        icon:5,
                                                    });
                                                }
                                            },
                                    });
                                })
                            }else{
                                layer.msg(message, {
                                    time: 3000,
                                    icon:5,
                                });
                            }
                        }
                    }
                })
		    }
		})
    };
  </script>
  <style>
        #bg{
	        display: none;
	        position: absolute;
	        top: 0%;
	        left: 0%;
	        width: 83%;
	        height: 100%;
	        background-color: black;
	        z-index:1001;
	        -moz-opacity: 0.3;
	        opacity:.30;
	        filter: alpha(opacity=30);
	    }

        input[type=checkbox] {
            margin-right: 10px;
            cursor: pointer;
            width: 15px;
            height: 15px;
            position: relative;
        }

        input[type=checkbox]:after {
            position: absolute;
            width: 15px;
            height: 15px;
            top: 0;
            content: " ";
            background-color: #fff;
            color: #fff;
            display: inline-block;
            visibility: visible;
            border: 1px solid grey;
            padding: 0 3px;
            border-radius: 3px;
        }

        input[type=checkbox]:checked:after {
            background-color: #0f97e7;
            content: "✓";
            font-size: 12px;
        }
        .box {
            border:2px solid blue;
            width: 0px;
            height: 0px;
            position: absolute;
            opacity: 0.5;
        }
        .demo-tree{margin: 10px 20px;}
        .demo-tree-more{
            margin-top: -3px;
            margin-right: 20px;
            margin-bottom: 20px;
            margin-left: 20px;
        }
        .demo-tree-box{width: 200px; padding: 10px; border: 1px solid #ddd; overflow: auto;}
        .process-class .layui-layer-btn0 {
			background-color: #009688;
			color: #fff;
		}
        .process-class .layui-layer-btn2 {
			background-color: #FF5722;
			color: #fff;
		}
		input{
		    height: 23px;
		    border: 1px solid #ccc;
		    padding: 7px 0px;
		    border-radius: 3px;
		    padding-left:5px;
		    -webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075);
		    box-shadow: inset 0 1px 1px rgba(0,0,0,.075);
		    -webkit-transition: border-color ease-in-out .15s,-webkit-box-shadow ease-in-out .15s;
		    -o-transition: border-color ease-in-out .15s,box-shadow ease-in-out .15s;
		    transition: border-color ease-in-out .15s,box-shadow ease-in-out .15s
		}
		input:focus{
		    border-color: #66afe9;
		    outline: 0;
		    -webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(102,175,233,.6);
		    box-shadow: inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(102,175,233,.6)
		}
      </style>
</head>

<body style="overflow-y: hidden;">
  <input id="ip" style="display:none;"/>
  <input id="start" style="display:none;"/>
  <input id="x" style="display:none;"/>
  <input id="y" style="display:none;"/>
  <input id="borderColor" style="display:none;"/>
  <input id="move" style="display:none;"/>
  <input id="left" style="display:none;"/>
  <input id="top" style="display:none;"/>
  <input id="width" style="display:none;"/>
  <input id="next_left" style="display:none;"/>
  <input id="next_top" style="display:none;"/>
  <input id="next_width" style="display:none;"/>
  <input id="arrange" style="display:none;"/>
  <input id="next" style="display:none;"/>
  <input id="type" style="display:none;"/>
  <input id="selectfile" style="display:none;"/>
  <input id="group_id" style="display:none;"/>
  <input id="copy_mode" style="display:none;"/>
  <input id="drop_id" style="display:none;"/>
  <ul id="header" class="layui-nav" style="background: #EFF4FE;border-bottom: 1px solid #BED5F3;">
    {% if 'Draw_Process.views_menu_file_open' in perms %}
    <li class="layui-nav-item" style="margin-left:-15px;">
      <a style="color:#333 !important" href="javascript:;"><i class="fa fa-folder-open"></i> Open</a>
      <dl class="layui-nav-child">
        {% if 'Draw_Process.views_menu_file_open_public' in perms %}
        <dd><a href="javascript:openFile('public')" style="line-height:30px;text-align:center;">Public</a></dd>
        {% endif %}
        {% if 'Draw_Process.views_menu_file_open_private' in perms %}
        <dd><a href="javascript:openFile('private')" style="line-height:30px;text-align:center;">Private</a></dd>
        {% endif %}
        {% if 'Draw_Process.views_menu_file_open_release' in perms %}
        <dd><a href="javascript:openFile('release')" style="line-height:30px;text-align:center;">Release</a></dd>
        {% endif %}
      </dl>
    </li>
    {% endif %}
    {% if 'Draw_Process.views_menu_file_save' in perms %}
    <li class="layui-nav-item" style="margin-left:10px;">
      <a style="color:#333 !important" href="javascript:;"><i class="fa fa-save"></i> Save</a>
      <dl class="layui-nav-child">
        {% if 'Draw_Process.views_menu_file_save_public' in perms %}
        <dd><a href="javascript:saveProcess('public')" style="line-height:30px;text-align:center;">Public</a></dd>
        {% endif %}
        {% if 'Draw_Process.views_menu_file_save_private' in perms %}
        <dd><a href="javascript:saveProcess('private')" style="line-height:30px;text-align:center;">Private</a></dd>
        {% endif %}
        {% if 'Draw_Process.views_menu_file_save_release' in perms %}
        <dd><a href="javascript:saveProcess('release')" style="line-height:30px;text-align:center;">Release</a></dd>
        {% endif %}
      </dl>
    </li>
    {% endif %}
    {% if 'Draw_Process.views_menu_execute_download' in perms %}
    <li class="layui-nav-item" style="margin-left:10px;"><a href="javascript:" style="color:#333 !important" href=""><i class="glyphicon glyphicon-download"></i> Download</a></li>
    {% endif %}
    {% if 'Draw_Process.views_menu_execute_run' in perms %}
    <li class="layui-nav-item" style="margin-left:10px;">
      <a style="color:#333 !important" href="javascript:;"><i class="fa fa-play-circle-o"></i> Run</a>
      <dl class="layui-nav-child">
        {% if 'Draw_Process.views_menu_execute_run_own_pc' in perms %}
        <dd><a href="javascript:before_run('own')" style="line-height:30px;text-align:center;">Own PC</a></dd>
        {% endif %}
        {% if 'Draw_Process.views_menu_execute_run_server' in perms %}
        <dd><a href="javascript:before_run('server')" style="line-height:30px;text-align:center;">Server</a></dd>
        {% endif %}
        {% if 'Draw_Process.views_menu_execute_run_cn190439' in perms %}
        <dd><a href="javascript:before_run('10.190.11.158')" style="line-height:30px;text-align:center;">CN190439</a></dd>
        {% endif %}
        {% if 'Draw_Process.views_menu_execute_run_fixed_ip' in perms %}
        <dd><a href="javascript:before_run('fix')" style="line-height:30px;text-align:center;">Fixed IP</a></dd>
        {% endif %}
      </dl>
    </li>
    {% endif %}
    {% if 'Draw_Process.views_menu_execute_task' in perms %}
    <li class="layui-nav-item" style="margin-left:10px;">
      <a style="color:#333 !important" href="javascript:;"><i class="fa fa-clock-o"></i> Task</a>
      <dl class="layui-nav-child">
        {% if 'Draw_Process.views_menu_execute_task_own_pc' in perms %}
        <dd><a href="javascript:book('own')" style="line-height:30px;text-align:center;">Own PC</a></dd>
        {% endif %}
        {% if 'Draw_Process.views_menu_execute_task_server' in perms %}
        <dd><a href="javascript:book('server')" style="line-height:30px;text-align:center;">Server</a></dd>
        {% endif %}
        {% if 'Draw_Process.views_menu_execute_task_cn190439' in perms %}
        <dd><a href="javascript:book('10.190.11.158')" style="line-height:30px;text-align:center;">CN190439</a></dd>
        {% endif %}
      </dl>
    </li>
    {% endif %}
    {% if 'Draw_Process.views_menu_view_rearrange' in perms %}
    <li class="layui-nav-item" style="margin-left:10px;" onclick="rearrangement()"><a style="color:#333 !important" href="javascript:"><i class="fa fa-sort-amount-asc"></i> Re-arr</a></li>
    {% endif %}
    {% if 'Draw_Process.views_menu_view_clear' in perms %}
    <li class="layui-nav-item" style="margin-left:10px;" onclick="clean()"><a style="color:#333 !important" href="javascript:"><i class="fa fa-close"></i> Clear</a></li>
    {% endif %}
    {% if 'Draw_Process.views_menu_language' in perms %}
    <li class="layui-nav-item" style="margin-left:10px;">
      <a style="color:#333 !important" href="javascript:;"><i class="fa fa-language"></i> Language</a>
      <dl class="layui-nav-child">
        {% if 'Draw_Process.views_menu_language_english' in perms %}
        <dd><a href="" style="line-height:30px;text-align:center;">English</a></dd>
        {% endif %}
        {% if 'Draw_Process.views_menu_language_chinese' in perms %}
        <dd><a href="" style="line-height:30px;text-align:center;">Chinese</a></dd>
        {% endif %}
      </dl>
    </li>
    {% endif %}
    {% if 'Draw_Process.views_menu_record' in perms %}
    <li class="layui-nav-item" style="margin-left:10px;">
      <a style="color:#333 !important" href="javascript:;"><i class="fa fa-video-camera"></i> Record</a>
      <dl class="layui-nav-child">
        {% if 'Draw_Process.views_menu_record_chrome' in perms %}
        <dd><a href="" style="line-height:30px;text-align:center;">Chrome</a></dd>
        {% endif %}
        {% if 'Draw_Process.views_menu_record_ie' in perms %}
        <dd><a href="" style="line-height:30px;text-align:center;">IE</a></dd>
        {% endif %}
        {% if 'Draw_Process.views_menu_record_sap' in perms %}
        <dd><a href="" style="line-height:30px;text-align:center;">SAP</a></dd>
        {% endif %}
        {% if 'Draw_Process.views_menu_record_excel' in perms %}
        <dd><a href="" style="line-height:30px;text-align:center;">Excel</a></dd>
        {% endif %}
      </dl>
    </li>
    {% endif %}
    {% if 'Draw_Process.views_menu_help' in perms %}
    <li class="layui-nav-item" style="margin-left:10px;"><a style="color:#333 !important;" href="javascript:"><i class="fa fa-question-circle"></i> Help</a></li>
    {% endif %}
    <div id="setting-header" style="width:16.66666667%;maring-top:5px;float:right;background:#d9edf7;display:none;text-align:center;"><a style="font-size:16px;color:#333 !important;" href="javascript:;"><i class="fa fa-gear"></i> Setting</a></div>
  </ul>
  <div id="main" style="height:100%;width:100%;">
    <div class="container-fluid">
      <div class="row">
        <div id="bg"></div>
        <div id="diagramContainer-left" class="col-md-2 bg-info min-height" style="width:16.66666666%;background:#fff;padding-right:0px;padding-left:0px;float:left;">

          <ul class="accordion-menu" style="width:100%;height:100%;padding-inline-start:0px;">
            {% if 'Draw_Process.views_main_function' in perms %}
            <li>
              <div class="dropdownlink"><i class="icon-home" aria-hidden="true"></i>Main Function
                <i class="fa fa-chevron-down" aria-hidden="true"></i>
              </div>
              <ul class="submenuItems" style="padding-inline-start: 0px;overflow-y:auto;">
                {% if 'Draw_Process.views_start' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12" style="height:24px !important">
                      <div style="float:left;margin-right:5px !important;"><i class="fa fa-play-circle"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="start" data-jnode-class="jnode-radius bdc-success"><span>Start</span></div>
		            </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_end' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12" style="height:24px !important">
                      <div style="float:left;margin-right:5px !important;"><i class="fa fa-stop-circle"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="end" data-jnode-class="jnode-radius bdc-danger"><span>End</span></div>
		            </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_wait' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12" style="height:24px !important">
                      <div style="float:left;margin-right:5px !important;"><i class="fa fa-clock-o"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="end" data-jnode-class="jnode-radius bdc-wait"><span>Wait</span></div>
		            </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_if' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12" style="height:24px !important">
                      <div style="float:left;margin-right:5px !important;"><i class="fa fa-random"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="judge" data-jnode-class="jnode-diamond jnode-judge bdc-warning"><span>If</span></div>
		            </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_else_if' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12" style="height:24px !important">
                      <div style="float:left;margin-right:5px !important;"><i class="fa fa-random"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="judge" data-jnode-class="jnode-diamond jnode-judge bdc-warning"><span>Else_If</span></div>
		            </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_else' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12" style="height:24px !important">
                      <div style="float:left;margin-right:5px !important;"><i class="fa fa-random"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="judge" data-jnode-class="jnode-diamond jnode-judge bdc-warning"><span>Else</span></div>
		            </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_end_if' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12" style="height:24px !important">
                      <div style="float:left;margin-right:5px !important;"><i class="fa fa-random"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="judge" data-jnode-class="jnode-diamond jnode-judge bdc-warning"><span>End_If</span></div>
		            </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_while' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12" style="height:24px !important">
                      <div style="float:left;margin-right:5px !important;"><i class="fa fa-circle-o-notch"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="judge" data-jnode-class="jnode-diamond jnode-judge bdc-warning"><span>While</span></div>
		            </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_exit_w' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12" style="height:24px !important">
                      <div style="float:left;margin-right:5px !important;"><i class="fa fa-circle-o-notch"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="judge" data-jnode-class="jnode-diamond jnode-judge bdc-warning"><span>Exit_W</span></div>
		            </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_for' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12" style="height:24px !important">
                      <div style="float:left;margin-right:5px !important;"><i class="fa fa-th-list"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="judge" data-jnode-class="jnode-diamond jnode-judge bdc-warning"><span>For</span></div>
		            </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_break' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12" style="height:24px !important">
                      <div style="float:left;margin-right:5px !important;"><i class="fa fa-th-list"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="judge" data-jnode-class="jnode-diamond jnode-judge bdc-warning"><span>Break</span></div>
		            </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_exit_for' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12" style="height:24px !important">
                      <div style="float:left;margin-right:5px !important;"><i class="fa fa-th-list"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="judge" data-jnode-class="jnode-diamond jnode-judge bdc-warning"><span>Exit_For</span></div>
		            </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_try' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12" style="height:24px !important">
                      <div style="float:left;margin-right:5px !important;"><i class="fa fa-bolt"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="judge" data-jnode-class="jnode-diamond jnode-judge bdc-warning"><span>Try</span></div>
		            </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_except' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12" style="height:24px !important">
                      <div style="float:left;margin-right:5px !important;"><i class="fa fa-bolt"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="judge" data-jnode-class="jnode-diamond jnode-judge bdc-warning"><span>Except</span></div>
		            </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_end_try' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12" style="height:24px !important">
                      <div style="float:left;margin-right:5px !important;"><i class="fa fa-bolt"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="judge" data-jnode-class="jnode-diamond jnode-judge bdc-warning"><span>End_Try</span></div>
		            </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_define' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12" style="height:24px !important">
                      <div style="float:left;margin-right:5px !important;"><i class="fa fa-facebook"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="judge" data-jnode-class="jnode-diamond jnode-judge bdc-warning"><span>Define</span></div>
		            </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_end_def' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12" style="height:24px !important">
                      <div style="float:left;margin-right:5px !important;"><i class="fa fa-facebook"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="judge" data-jnode-class="jnode-diamond jnode-judge bdc-warning"><span>End_Def</span></div>
		            </div>
                  </div>
                </li>
                {% endif %}
              </ul>
            </li>
            {% endif %}
            {% if 'Draw_Process.views_tkinter' in perms %}
            <li>
              <div class="dropdownlink"><i class="icon-layers" aria-hidden="true"></i>Tkinter
                <i class="fa fa-chevron-down" aria-hidden="true"></i>
              </div>
              <ul class="submenuItems" style="padding-inline-start: 0px;overflow-y:auto;">
                {% if 'Draw_Process.views_main_window' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-hourglass-start"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Main_Window</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_message_box' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-info"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Message_Box</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_label' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-event"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Label</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_entry' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-inbox"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Entry</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_get_entry_value' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-inbox"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Get_Entry_Value</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_button' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-mouse-pointer"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Button</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_list_box' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-list-alt"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>List_Box</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_main_loop' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-hourglass-end"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Main_Loop</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
              </ul>
            </li>
            {% endif %}
            {% if 'Draw_Process.views_web_module' in perms %}
            <li>
              <div class="dropdownlink"><i class="fa fa-internet-explorer" aria-hidden="true"></i>Web Module
                <i class="fa fa-chevron-down" aria-hidden="true"></i>
              </div>
              <ul class="submenuItems" style="padding-inline-start: 0px;overflow-y:auto;">
                {% if 'Draw_Process.views_configuration' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-cogs"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Configuration</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_start_browser' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-play"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Start_Browser</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_click_element' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-location-pin"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Click_Element</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_clear' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-location-pin"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Clear</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_send_keys' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-location-pin"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Send_Keys</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_double_click' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-location-pin"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Double_Click</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_content_click' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-location-pin"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Content_Click</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_get_text' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-file-text-o"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Get_Text</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_reuse_browser' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-control-play"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Reuse_Browser</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_switch_to_frame' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-exchange"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Switch_to_Frame</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_parent_frame' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-exchange"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Parent_Frame</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_switch_back' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-undo"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Switch_Back</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_switch_to_window' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-exchange"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Switch_to_Window</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_file_download' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-cloud-download"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>File_Download</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_forward' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-arrow-right"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Forward</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_back' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-arrow-left"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Back</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_refresh' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-refresh"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Refresh</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_close' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-sign-out"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Close</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_quit' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-sign-out"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Quit</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_self_code' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-pencil-square"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Self_Code</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_run_script' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-code"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Run_Script</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
              </ul>
            </li>
            {% endif %}
            {% if 'Draw_Process.views_file_module' in perms %}
            <li>
              <div class="dropdownlink"><i class="fa fa-file-o" aria-hidden="true"></i>File Module
                <i class="fa fa-chevron-down" aria-hidden="true"></i>
              </div>
              <ul class="submenuItems" style="padding-inline-start: 0px;overflow-y:auto;">
                {% if 'Draw_Process.views_folder_exist?' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-question-circle"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Folder_Exist?</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_new_folder' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-folder"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>New_Folder</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_copy_folder' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-copy"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Copy_Folder</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_move_folder' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="glyphicon glyphicon-transfer"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Move_Folder</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_delete_folder' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="glyphicon glyphicon-remove-circle"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Delete_Folder</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_read_folder' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="glyphicon glyphicon-list-alt"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Read_Folder</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_file_exist?' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-question-circle"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>File_Exist?</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_new_file' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-file-text-o"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>New_File</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_copy_file' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-copy"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Copy_File</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_move_file' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="glyphicon glyphicon-transfer"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Move_File</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_add_to_file' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-pencil-square-o"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Add_to_File</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_get_file_information' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-file-zip-o"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Get_File_Information</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_get_file_content' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-file-text-o"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Get_File_Content</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_delete_file' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="glyphicon glyphicon-remove-circle"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Delete_File</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_run_bat' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-code"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Run_Bat</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
              </ul>
            </li>
            {% endif %}
            {% if 'Draw_Process.views_excel_module' in perms %}
            <li>
              <div class="dropdownlink"><i class="fa fa-file-excel-o" aria-hidden="true"></i>Excel Module
                <i class="fa fa-chevron-down" aria-hidden="true"></i>
              </div>
              <ul class="submenuItems" style="padding-inline-start: 0px;overflow-y:auto;">
                {% if 'Draw_Process.views_new_workbook' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-plus-square-o"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>New_Workbook</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_open_workbook' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-size-fullscreen"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Open_Workbook</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_active_workbook' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-target"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Active_Workbook</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_close_workbook' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-close"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Close_Workbook</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_close_workbooks' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-close"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Close_Workbooks</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_save' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-save"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Save</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_save_as' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="glyphicon glyphicon-floppy-saved"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Save_As</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_save_as' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-question-circle"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Sheet_Exist?</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_sheets_count' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-list-ol"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Sheets_Count</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_add_sheet' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-plus-square"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Add_Sheet</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_delete_sheet' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="glyphicon glyphicon-remove-circle"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Delete_Sheet</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_used_rows' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-list-ol"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Used_Rows</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_used_columns' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-list-ol"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Used_Columns</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_run_marco' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-file-code-o"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Run_Marco</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_calculation' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-calculator"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Calculation</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_top_10' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-filter"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Top_10</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_filter' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-filter"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Filter</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_filter_result' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="glyphicon glyphicon-filter"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Filter_Result</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_delete_cells' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="glyphicon glyphicon-remove-sign"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Delete_Cells</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_merge_cells' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-object-group"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Merge_Cells</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_unmerge_cells' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-object-ungroup"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>UnMerge_Cells</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_clear_cells' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="glyphicon glyphicon-remove-circle"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Clear_Cells</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_cut_cells' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-cut"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Cut_Cells</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_copy_cells' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-copy"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Copy_Cells</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_paste_cells' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-paste"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Paste_Cells</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_sort_cells' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-sort-amount-asc"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Sort_Cells</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_read_cell' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-newspaper-o"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Read_Cell</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_write_cell' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-pencil-square-o"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Write_Cell</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_image_cell' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-file-image-o"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Image_Cell</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_auto_fit' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-columns"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Auto_Fit</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_format' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-th"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Format</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_insert' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-plus-square-o"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Insert</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_select_excel' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-exchange"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Select_Excel</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_show_level' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-level-down"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Show_Level</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
              </ul>
            </li>
            {% endif %}
            {% if 'Draw_Process.views_access_module' in perms %}
            <li>
              <div class="dropdownlink"><i class="fa fa-database" aria-hidden="true"></i>Access Module
                <i class="fa fa-chevron-down" aria-hidden="true"></i>
              </div>
              <ul class="submenuItems" style="padding-inline-start: 0px;overflow-y:auto;">
                {% if 'Draw_Process.views_insert_sql' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-search-plus"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Insert_SQL</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_update_sql' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-search"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Update_SQL</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_select_sql' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-search"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Select_SQL</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_delete_sql' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-search-minus"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Delete_SQL</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_custom_sql' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-pencil-square-o"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Custom_SQL</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
              </ul>
            </li>
            {% endif %}
            {% if 'Draw_Process.views_mail' in perms %}
            <li>
              <div class="dropdownlink"><i class="fa fa-envelope" aria-hidden="true"></i>Mail
                <i class="fa fa-chevron-down" aria-hidden="true"></i>
              </div>
              <ul class="submenuItems" style="padding-inline-start: 0px;overflow-y:auto;">
                {% if 'Draw_Process.views_send_mail' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-envelope-open"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Send_Mail</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_read_mail' in perms %}
                 <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-envelope-letter"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Read_Mail</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
              </ul>
            </li>
            {% endif %}
            {% if 'Draw_Process.views_sap' in perms %}
            <li>
              <div class="dropdownlink"><i class="fa fa-pinterest-square" aria-hidden="true"></i>SAP
                <i class="fa fa-chevron-down" aria-hidden="true"></i>
              </div>
              <ul class="submenuItems" style="padding-inline-start: 0px;overflow-y:auto;">
                {% if 'Draw_Process.views_start_sap' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-mouse"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Start_SAP</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_login_sap' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-login"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Login_SAP</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_logout_sap' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-logout"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Logout_SAP</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_t_code' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-pencil"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>T_Code</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_sap_exist?' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-question"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>SAP_Exist?</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_sap_get_text' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-question"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>SAP_Get_Text</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_sap_input' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-location-pin"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>SAP_Input</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_sap_send_vkey' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-location-pin"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>SAP_Send_VKey</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_sap_click' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-location-pin"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>SAP_Click</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_sap_select' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-location-pin"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>SAP_Select</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_sap_selected' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-location-pin"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>SAP_Selected</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_sap_cancel_select' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-location-pin"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>SAP_Cancel_Select</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_sap_key' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-location-pin"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>SAP_Key</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_sap_focus' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-location-pin"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>SAP_Focus</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_sap_close' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-location-pin"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>SAP_Close</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_caret_position' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-location-pin"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Caret_Position</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_expand_node' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-location-pin"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Expand_Node</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_select_node' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-location-pin"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Select_Node</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_selected_node' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-location-pin"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Selected_Node</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_top_node' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-location-pin"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Top_Node</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_double_click_node' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-location-pin"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Double_Click_Node</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_select_rows' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-location-pin"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Select_Rows</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_click_current_cell' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-location-pin"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Click_Current_Cell</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_sap_table_rows' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-location-pin"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>SAP_Table_Rows</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_sap_node_rows' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-location-pin"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>SAP_Node_Rows</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_sap_get_absolute_row' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-location-pin"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>SAP_Get_Absolute_Row</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_sap_press_toolbar' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-location-pin"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>SAP_Press_Toolbar</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_sap_select_context' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-location-pin"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>SAP_Select_Context</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_sap_vertical_scrollbar' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-location-pin"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>SAP_Vertical_Scrollbar</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_sap_selectitem' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-location-pin"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>SAP_SelectItem</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_sap_ensurevisiblehorizontalitem' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-location-pin"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>SAP_EnsureVisibleHorizontalItem</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_sap_doubleclickitem' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-location-pin"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>SAP_DoubleClickItem</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_sap_set_current_cell' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-location-pin"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>SAP_Set_Current_Cell</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_sap_first_visible_row' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-location-pin"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>SAP_First_Visible_Row</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_sap_presstoolbarcontextbutton' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-location-pin"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>SAP_PressToolbarContextButton</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_sap_selectcontextmenuitem' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-location-pin"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>SAP_SelectContextMenuItem</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
              </ul>
            </li>
            {% endif %}
            {% if 'Draw_Process.views_mouse&keyboard' in perms %}
            <li>
              <div class="dropdownlink"><i class="fa fa-keyboard-o" aria-hidden="true"></i>Mouse&Keyboard
                <i class="fa fa-chevron-down" aria-hidden="true"></i>
              </div>
              <ul class="submenuItems" style="padding-inline-start: 0px;overflow-y:auto;">
                {% if 'Draw_Process.views_screen_resolution' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-screen-desktop"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Screen_Resolution</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_move_mouse' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-cursor-move"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Move_Mouse</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_click_mouse' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-mouse"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Click_Mouse</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_scroll_mouse' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-mouse"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Scroll_Mouse</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_drag_mouse' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-cursor"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Drag_Mouse</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_press_keyboard' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-keyboard-o"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Press_Keyboard</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_hot_key' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-keyboard-o"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Hot_Key</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_typewrite' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-keyboard-o"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Typewrite</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
              </ul>
            </li>
            {% endif %}
            {% if 'Draw_Process.views_self_development' in perms %}
            <li>
              <div class="dropdownlink"><i class="fa fa-gear" aria-hidden="true"></i>System
                <i class="fa fa-chevron-down" aria-hidden="true"></i>
              </div>
              <ul class="submenuItems" style="padding-inline-start: 0px;overflow-y:auto;">
                {% if 'Draw_Process.views_double_to_string' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-exchange"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Double_to_String</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_reminder' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-italic"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Reminder</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_screen_shot' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="icon-screen-desktop"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Screen_Shot</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_set_focus' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-object-group"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Set_Focus</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_current_time' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="glyphicon glyphicon-time"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Current_Time</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_custom_variant' in perms %}
                 <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-pencil-square"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 20px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Custom_Variant</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_custom_code' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-pencil-square"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 20px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>Custom_Code</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
                {% if 'Draw_Process.views_user_input' in perms %}
                <li>
                  <div class="tab" style="height:24px !important">
                    <div class="col-sm-12">
                     <div style="float:left;margin-right:5px !important;"><i class="fa fa-chrome"></i></div>
                      <div style="float:left;cursor:pointer;width:calc(100% - 30px);" class="jnode-box2" data-template="jnode-template"
			          data-jnode="task" data-jnode-class="jnode-task bdc-primary"><span>User_Input</span></div>
		              </div>
                  </div>
                </li>
                {% endif %}
              </ul>
            </li>
            {% endif %}
            <li>
              <div class="dropdownlink"><i class="fa fa-clone" aria-hidden="true"></i>Process
                <i class="fa fa-chevron-down" aria-hidden="true"></i>
              </div>
              <ul class="submenuItems" style="padding-inline-start: 0px;overflow-y:auto;">
                <li>
                  <div id="task_select" class="demo-tree-more"></div>
                </li>
              </ul>
            </li>

          </ul>

        </div>
        <div class="col-sm-8 bg-success min-height" id="diagramContainer-main" style="width:83.33333334%;float:left;overflow-x:scroll">
				<script type="text/x-mustache" id="jnode-template">
					<div class="jnode-panel" id="{{id}}" style="top:{{top}}px;left:{{left}}px">
						<div class="jnode-box {{jnodeClass}}">{{jnodeHtml}}</div>
					</div>
				</script>
        </div>

		<div class="col-sm-2 bg-info min-height" id="diagramContainer-control" style="display:none;padding-left:5px;padding-right:5px;float:right;">
			<h4 class="text-center"><i class="fa fa-gear"></i> Setting</h4>
        </div>

      </div>
    </div>
  </div>


  <script src="../static/javascript/jvisio-flow/lib/jquery/jquery.min.js"></script>
  <script src="../static/javascript/jvisio-flow/lib/uuid.min.js"></script>
  <script src="../static/javascript/jvisio-flow/lib/mustache.min.js"></script>
  <script id="jqueryUi"  src="../static/javascript/jvisio-flow/lib/jqueryui/jquery-ui.js"></script>
  <script src="../static/javascript/jvisio-flow/lib/jquery.jsPlumb-1.7.2.js"></script>
  <script src="../static/javascript/jvisio-flow/jvisio-config.js"></script>
  <script src="../static/javascript/layer/layui.all.js"></script>
  <script src="../static/javascript/layer/layer.js"></script>
  <script src="../static/javascript/jvisio-flow/index.js"></script>
  <script src="../static/javascript/jvisio-flow/json2.js"></script>
  <script src="../static/javascript/createTools.js"></script>
  <script id="jvisio" src="../static/javascript/jvisio-flow/jvisio-index.js"></script>
  <script>
    $(document).ready(function(){
        getYourIP();
        div_json = {};
        div_selection_list = [];
        $("#drop_id").val("");
        $("#group_id").val("");
        $("#selectfile").val("");
        $("#run_time").val(0);
        var window_height = $(window).height() - 30;
        $("#diagramContainer-main").height(window_height);
        $("#diagramContainer-control").height(window_height);
        var main_height = $("#diagramContainer-main").height();
        var drop_down_divs = $(".dropdownlink");
        var sum_height = 0;
        for (i=0;i<drop_down_divs.length;i++){
            var drop_down_div = drop_down_divs[i];
            sum_height = sum_height + drop_down_div.offsetHeight;
        }
        var remain_height = main_height - sum_height;
        var sub_menu_items = $(".submenuItems");
        for (j=0;j<sub_menu_items.length;j++){
            var sub_menu_item = sub_menu_items[j];
            sub_menu_item.style.height = remain_height + "px";
        }
        var div_trees = $(".layui-tree-txt");
        for (i=0;i<div_trees.length;i++){
            var div_tree = div_trees[i];
            var last_span = div_tree.previousElementSibling;
            var last_class = last_span.className;
            if (last_class == "layui-tree-iconClick"){
                var div_text = div_tree.innerText;
                var div_tree_parent = div_tree.parentElement.parentElement.parentElement;
                var path = div_tree_parent.dataset.id;
                last_span.remove();
			    $('<div class="jnode-box2" data-template="jnode-template" data-jnode="task" data-jnode-class="jnode-task bdc-process" style="margin-left:10px;"><span name="'+path+'">'+div_text+'</span></div>').replaceAll(div_tree);
            }
        }
        reloadJS("jvisio","../static/javascript/jvisio-flow/jvisio-index.js");
    })
    layui.use(['tree', 'util'], function(){
	    $.ajax({
            type:'POST',
            url:'../datalist2/',
            dataType:'json',
            async : false,
            data:{},
            success:function(data){
                var data_list = data.rows;
                for (var i =0;i<data_list.length;i++){
                    var folder = data_list[i].title;
                    {% if 'Draw_Process.views_menu_file_open_public' not in perms %}
                    if (folder == "Public"){
                        delete data_list[i];
                        for (var m =0;m<data_list.length;i++){
                            folder = data_list[m].title;
                            {% if 'Draw_Process.views_menu_file_open_private' not in perms %}
                            if (folder == "Private"){
                                delete data_list[m];
                            }
                            for (var n =0;n<data_list.length;i++){
                                folder = data_list[n].title;
                                {% if 'Draw_Process.views_menu_file_open_release' not in perms %}
                                if (folder == "Release"){
                                    delete data_list[n];
                                }
                                {% endif %}
                                break;
                            }
                            {% endif %}
                            break;
                        }
                    }
                    {% endif %}
                    break;
                }
                var tree = layui.tree
                ,layer = layui.layer
                ,util = layui.util
                tree.render({
                    elem: '#task_select'
                    ,id: 'tree1'
                    ,data: data_list
                    ,showLine: true
                    ,spread: false
                });
            }
        })
    });
  </script>
</body>
</html>